{"remainingRequest":"I:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!I:\\Projects\\fanexus\\src\\components\\Auth\\Auth.vue?vue&type=script&lang=js&","dependencies":[{"path":"I:\\Projects\\fanexus\\src\\components\\Auth\\Auth.vue","mtime":1590069644826},{"path":"I:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZ2V0Q29tcG9uZW50c0J5UHJlZml4IGZyb20gJ0AvdXRpbHMvZ2V0Q29tcG9uZW50c0J5UHJlZml4JzsNCmltcG9ydCB7IGF1dGhSb290LCBhdXRoQXJlYXMgfSBmcm9tICdAL3NlcnZpY2VzL2F1dGguc2VydmljZSc7DQppbXBvcnQgeyBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7DQppbXBvcnQgRmFuZXh1c0xvZ2luTG9nbyBmcm9tICd+c3ZnL2ZhbmV4dXMtbG9naW4tbG9nby5zdmcnOw0KaW1wb3J0IHRhYnNNaXhpbiBmcm9tICdAL21peGlucy90YWJzLm1peGluJzsNCmltcG9ydCB2YWxpZGF0aW9uTWl4aW4gZnJvbSAnQC9taXhpbnMvdmFsaWRhdGlvbi5taXhpbic7DQppbXBvcnQgTW9kYWwgZnJvbSAnfmNvbW1vbi9Nb2RhbCc7DQppbXBvcnQgVGFicyBmcm9tICd+Y29tbW9uL1RhYnMnOw0KaW1wb3J0IEZvcm1JbnB1dCBmcm9tICd+ZmllbGRzL0Zvcm1JbnB1dCc7DQppbXBvcnQgRm9ybUJ1dHRvbiBmcm9tICd+Y29tbW9uL0J1dHRvbnMvRm9ybUJ1dHRvbic7DQoNCi8vIGF1dGggY29tcG9uZW50cw0KaW1wb3J0IEF1dGhDcmVhdGVBY2NvdW50IGZyb20gJ0AvY29tcG9uZW50cy9BdXRoL0F1dGhDcmVhdGVBY2NvdW50JzsNCmltcG9ydCBBdXRoTG9naW4gZnJvbSAnQC9jb21wb25lbnRzL0F1dGgvQXV0aExvZ2luJzsNCmltcG9ydCBBdXRoUmVzZXRQYXNzd29yZCBmcm9tICdAL2NvbXBvbmVudHMvQXV0aC9BdXRoUmVzZXRQYXNzd29yZCc7DQppbXBvcnQgQXV0aFBhc3NFbWFpbCBmcm9tICdAL2NvbXBvbmVudHMvQXV0aC9BdXRoUGFzc0VtYWlsJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBwcm9wczogew0KICAgIHNldHRpbmdzOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICByZXF1aXJlZDogdHJ1ZQ0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIE1vZGFsLA0KICAgIFRhYnMsDQogICAgRm9ybUlucHV0LA0KICAgIEZhbmV4dXNMb2dpbkxvZ28sDQogICAgRm9ybUJ1dHRvbiwNCiAgICAvLyBhdXRoIGNvbXBvbmVudHMNCiAgICBBdXRoQ3JlYXRlQWNjb3VudCwNCiAgICBBdXRoTG9naW4sDQogICAgQXV0aFBhc3NFbWFpbCwNCiAgICBBdXRoUmVzZXRQYXNzd29yZA0KICB9LA0KICBtaXhpbnM6IFt0YWJzTWl4aW4sIHZhbGlkYXRpb25NaXhpbl0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGF1dGhBcmVhcywNCiAgICAgIC8qQFRPRE8gcmV2aXNlIGR5bmFtaWMgZGF0YSovDQogICAgICBmb3JtRGF0YTogew0KICAgICAgICBuYW1lOiBudWxsLA0KICAgICAgICBlbWFpbDogbnVsbCwNCiAgICAgICAgZW1haWxDb25maXJtOiBudWxsLA0KICAgICAgICBwYXNzd29yZDogbnVsbCwNCiAgICAgICAgcGFzc3dvcmRDb25maXJtOiBudWxsLA0KICAgICAgICBhZ2VDaGVjazogZmFsc2UsDQogICAgICAgIHNlbGVjdGVkRGF0ZTogbnVsbA0KICAgICAgfSwNCiAgICAgIG5hdlRhYnM6IFsNCiAgICAgICAgWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHRpdGxlOiAnQ3JlYXRlIGFjY291bnQnLA0KICAgICAgICAgICAgY29tcG9uZW50OiBhdXRoQXJlYXMuY3JlYXRlVXNlciwNCiAgICAgICAgICAgIHN1Ym1pdFRleHQ6ICdKb2luIEZhbmV4dXMnDQogICAgICAgICAgfSwNCiAgICAgICAgICB7IHRpdGxlOiAnTG9naW4nLCBjb21wb25lbnQ6IGF1dGhBcmVhcy5sb2dpbiwgc3VibWl0VGV4dDogJ0xvZ2luJyB9DQogICAgICAgIF0sDQogICAgICAgIC8qQFRPRE8gcmV2aXNlIHBhc3MgZW1haWwqLw0KICAgICAgICBbDQogICAgICAgICAgew0KICAgICAgICAgICAgdGl0bGU6ICdQYXNzIGFuIGVtYWlsJywNCiAgICAgICAgICAgIGNvbXBvbmVudDogYXV0aEFyZWFzLnBhc3NFbWFpbCwNCiAgICAgICAgICAgIHN1Ym1pdFRleHQ6ICdTZW5kIGFuIGVtYWlsJw0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHRpdGxlOiAnUmVzZXQgcGFzc3dvcmQnLA0KICAgICAgICAgICAgY29tcG9uZW50OiBhdXRoQXJlYXMucmVzZXRQYXNzd29yZCwNCiAgICAgICAgICAgIHN1Ym1pdFRleHQ6ICdSZXNldCBwYXNzd29yZCcNCiAgICAgICAgICB9DQogICAgICAgIF0NCiAgICAgIF0sDQogICAgICBjdXJyZW50Q29tcG9uZW50OiBudWxsDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBhdXRoQ29tcG9uZW50cygpIHsNCiAgICAgIHJldHVybiBnZXRDb21wb25lbnRzQnlQcmVmaXguY2FsbCh0aGlzLCBhdXRoUm9vdCk7DQogICAgfSwNCiAgICBzdWJtaXRUZXh0KCkgew0KICAgICAgY29uc3QgY3VycmVudFRhYiA9IHRoaXMudmlzaWJsZVRhYnMuZmluZCgNCiAgICAgICAgdCA9PiB0LmNvbXBvbmVudCA9PT0gdGhpcy5jdXJyZW50Q29tcG9uZW50DQogICAgICApOw0KICAgICAgcmV0dXJuIGN1cnJlbnRUYWIgPyBjdXJyZW50VGFiLnN1Ym1pdFRleHQgOiBudWxsOw0KICAgIH0sDQogICAgdmlzaWJsZVRhYnMoKSB7DQogICAgICBzd2l0Y2ggKHRoaXMuY3VycmVudENvbXBvbmVudCkgew0KICAgICAgICBjYXNlIGF1dGhBcmVhcy5wYXNzRW1haWw6DQogICAgICAgICAgcmV0dXJuIHRoaXMubmF2VGFic1sxXTsNCg0KICAgICAgICBjYXNlIGF1dGhBcmVhcy5yZXNldFBhc3N3b3JkOg0KICAgICAgICAgIHJldHVybiB0aGlzLm5hdlRhYnNbMl07DQogICAgICB9DQogICAgICAvLyAnYXV0aC1jcmVhdGUtYWNjb3VudCcsICdsb2dpbicNCiAgICAgIHJldHVybiB0aGlzLm5hdlRhYnNbMF07DQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgIGZvcm1EYXRhOiB7DQogICAgICBoYW5kbGVyKCkgew0KICAgICAgICB0aGlzLmhhbmRsZUNoZWNrQ2xpZW50VmFsaWRhdGlvbigpOw0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tYXBBY3Rpb25zKFsnY3JlYXRlVXNlcicsICdsb2dpbiddKSwNCiAgICAvKkBUT0RPIHJldmlzZSB0aGUgbmFtZSwgaSB0aGluayBjdXJyZW50bHkgaXQncyBub3QgY2xvc2luZyB0aGUgbW9kYWwgYnV0IHJlZnJlc2hpbmcgaXRzIHN0YXRlKi8NCiAgICBoYW5kbGVNb2RhbENsb3NlKCkgew0KICAgICAgdGhpcy5hY3RpdmVUYWIgPSAwOw0KICAgICAgdGhpcy5zZXRDb21wb25lbnQoKTsNCiAgICB9LA0KICAgIHNldENvbXBvbmVudCh0YWJJbmRleCA9IDAsIGNvbXBvbmVudEluZGV4ID0gMCkgew0KICAgICAgdGhpcy5oYW5kbGVTZXRBY3RpdmVUYWIodGFiSW5kZXgpOw0KICAgICAgdGhpcy5jdXJyZW50Q29tcG9uZW50ID0gdGhpcy5hdXRoQ29tcG9uZW50c1tjb21wb25lbnRJbmRleF07DQogICAgfSwNCiAgICBoYW5kbGVDaGVja0NsaWVudFZhbGlkYXRpb24oKSB7DQogICAgICBjb25zdCB7ICRyZWZzID0ge30gfSA9IHRoaXMuJHJlZnMuY3VycmVudENvbXBvbmVudFJlZjsNCiAgICAgIHJldHVybiB0aGlzLmNoZWNrQ2xpZW50VmFsaWRhdGlvbih7DQogICAgICAgIHJlZnM6IHsgcGFzc3dvcmRDb25maXJtUmVmOiAkcmVmcy5wYXNzd29yZENvbmZpcm1SZWYgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBhc3luYyBoYW5kbGVTdWJtaXQoKSB7DQogICAgICBpZiAoIXRoaXMuaGFuZGxlQ2hlY2tDbGllbnRWYWxpZGF0aW9uKCkpIHJldHVybjsNCg0KICAgICAgY29uc3QgY3VycmVudEFyZWEgPSBPYmplY3QuZW50cmllcyh0aGlzLmF1dGhBcmVhcykuZmluZCgNCiAgICAgICAgaSA9PiBpWzFdID09PSB0aGlzLmN1cnJlbnRDb21wb25lbnQNCiAgICAgICk7DQoNCiAgICAgIGlmIChjdXJyZW50QXJlYSAmJiBjdXJyZW50QXJlYS5sZW5ndGgpIHsNCiAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpc1tjdXJyZW50QXJlYVswXV07DQoNCiAgICAgICAgaWYgKGFjdGlvbikgew0KICAgICAgICAgIGF3YWl0IGFjdGlvbih0aGlzLmZvcm1EYXRhKTsNCiAgICAgICAgICB0aGlzLiRlbWl0KCdzdWJtaXQnKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICBjb25zdCBbdGFiSW5kZXgsIGNvbXBvbmVudEluZGV4XSA9IHRoaXMuc2V0dGluZ3MuaW5pdGlhbFRhYjsNCg0KICAgIHRoaXMuc2V0Q29tcG9uZW50KHRhYkluZGV4LCBjb21wb25lbnRJbmRleCk7DQogIH0NCn07DQo="},{"version":3,"sources":["Auth.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Auth.vue","sourceRoot":"src/components/Auth","sourcesContent":["<template>\r\n  <modal :settings=\"settings\" @close=\"handleModalClose\" class=\"auth\">\r\n    <div class=\"auth-image\" slot=\"modal-image\"></div>\r\n    <fanexus-login-logo class=\"fanexus-logo\" slot=\"header\" />\r\n    <tabs\r\n      class=\"tabs--auth\"\r\n      slot=\"body\"\r\n      :tabs=\"visibleTabs\"\r\n      @selectTab=\"$active => setComponent($active, $active)\"\r\n      :active=\"activeTab\"\r\n    >\r\n      <form action=\"#\" class=\"auth-form\" @submit.prevent=\"handleSubmit\">\r\n        <component\r\n          :is=\"currentComponent\"\r\n          :formData=\"formData\"\r\n          ref=\"currentComponentRef\"\r\n        />\r\n        <form-button class=\"full-width\" type=\"submit\" :text=\"submitText\" />\r\n      </form>\r\n      <a\r\n        class=\"auth-form__forgot\"\r\n        v-if=\"currentComponent === authAreas.login\"\r\n        @click.prevent.stop=\"setComponent(0, 2)\"\r\n        >Forgot password?</a\r\n      >\r\n    </tabs>\r\n  </modal>\r\n</template>\r\n<script>\r\nimport getComponentsByPrefix from '@/utils/getComponentsByPrefix';\r\nimport { authRoot, authAreas } from '@/services/auth.service';\r\nimport { mapActions } from 'vuex';\r\nimport FanexusLoginLogo from '~svg/fanexus-login-logo.svg';\r\nimport tabsMixin from '@/mixins/tabs.mixin';\r\nimport validationMixin from '@/mixins/validation.mixin';\r\nimport Modal from '~common/Modal';\r\nimport Tabs from '~common/Tabs';\r\nimport FormInput from '~fields/FormInput';\r\nimport FormButton from '~common/Buttons/FormButton';\r\n\r\n// auth components\r\nimport AuthCreateAccount from '@/components/Auth/AuthCreateAccount';\r\nimport AuthLogin from '@/components/Auth/AuthLogin';\r\nimport AuthResetPassword from '@/components/Auth/AuthResetPassword';\r\nimport AuthPassEmail from '@/components/Auth/AuthPassEmail';\r\n\r\nexport default {\r\n  props: {\r\n    settings: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  components: {\r\n    Modal,\r\n    Tabs,\r\n    FormInput,\r\n    FanexusLoginLogo,\r\n    FormButton,\r\n    // auth components\r\n    AuthCreateAccount,\r\n    AuthLogin,\r\n    AuthPassEmail,\r\n    AuthResetPassword\r\n  },\r\n  mixins: [tabsMixin, validationMixin],\r\n  data() {\r\n    return {\r\n      authAreas,\r\n      /*@TODO revise dynamic data*/\r\n      formData: {\r\n        name: null,\r\n        email: null,\r\n        emailConfirm: null,\r\n        password: null,\r\n        passwordConfirm: null,\r\n        ageCheck: false,\r\n        selectedDate: null\r\n      },\r\n      navTabs: [\r\n        [\r\n          {\r\n            title: 'Create account',\r\n            component: authAreas.createUser,\r\n            submitText: 'Join Fanexus'\r\n          },\r\n          { title: 'Login', component: authAreas.login, submitText: 'Login' }\r\n        ],\r\n        /*@TODO revise pass email*/\r\n        [\r\n          {\r\n            title: 'Pass an email',\r\n            component: authAreas.passEmail,\r\n            submitText: 'Send an email'\r\n          }\r\n        ],\r\n        [\r\n          {\r\n            title: 'Reset password',\r\n            component: authAreas.resetPassword,\r\n            submitText: 'Reset password'\r\n          }\r\n        ]\r\n      ],\r\n      currentComponent: null\r\n    };\r\n  },\r\n  computed: {\r\n    authComponents() {\r\n      return getComponentsByPrefix.call(this, authRoot);\r\n    },\r\n    submitText() {\r\n      const currentTab = this.visibleTabs.find(\r\n        t => t.component === this.currentComponent\r\n      );\r\n      return currentTab ? currentTab.submitText : null;\r\n    },\r\n    visibleTabs() {\r\n      switch (this.currentComponent) {\r\n        case authAreas.passEmail:\r\n          return this.navTabs[1];\r\n\r\n        case authAreas.resetPassword:\r\n          return this.navTabs[2];\r\n      }\r\n      // 'auth-create-account', 'login'\r\n      return this.navTabs[0];\r\n    }\r\n  },\r\n  watch: {\r\n    formData: {\r\n      handler() {\r\n        this.handleCheckClientValidation();\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(['createUser', 'login']),\r\n    /*@TODO revise the name, i think currently it's not closing the modal but refreshing its state*/\r\n    handleModalClose() {\r\n      this.activeTab = 0;\r\n      this.setComponent();\r\n    },\r\n    setComponent(tabIndex = 0, componentIndex = 0) {\r\n      this.handleSetActiveTab(tabIndex);\r\n      this.currentComponent = this.authComponents[componentIndex];\r\n    },\r\n    handleCheckClientValidation() {\r\n      const { $refs = {} } = this.$refs.currentComponentRef;\r\n      return this.checkClientValidation({\r\n        refs: { passwordConfirmRef: $refs.passwordConfirmRef }\r\n      });\r\n    },\r\n    async handleSubmit() {\r\n      if (!this.handleCheckClientValidation()) return;\r\n\r\n      const currentArea = Object.entries(this.authAreas).find(\r\n        i => i[1] === this.currentComponent\r\n      );\r\n\r\n      if (currentArea && currentArea.length) {\r\n        const action = this[currentArea[0]];\r\n\r\n        if (action) {\r\n          await action(this.formData);\r\n          this.$emit('submit');\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    const [tabIndex, componentIndex] = this.settings.initialTab;\r\n\r\n    this.setComponent(tabIndex, componentIndex);\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.fanexus-logo {\r\n  fill: var(--color-main-800);\r\n  height: 10px;\r\n}\r\n\r\n.auth {\r\n  background: var(--color-main-800);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  &-form {\r\n    width: 250px;\r\n\r\n    ::v-deep &-content {\r\n      display: flex;\r\n      flex-direction: column;\r\n    }\r\n    &__forgot {\r\n      font-size: var(--size-small);\r\n      margin-top: var(--element-margin-s);\r\n      color: var(--text-create-account-active);\r\n      cursor: pointer;\r\n    }\r\n  }\r\n\r\n  &-image {\r\n    background: url('~@/assets/img/login-image.png') center no-repeat;\r\n    width: 344px;\r\n    height: 568px;\r\n  }\r\n\r\n  ::v-deep {\r\n    .modal-header {\r\n      position: relative;\r\n      height: 20px;\r\n      padding: 0;\r\n      margin: var(--element-margin-xl) 0;\r\n      background: var(--color-white);\r\n      box-shadow: none;\r\n      &-btn__close {\r\n        top: 0;\r\n        right: 0;\r\n        transform: translateX(100%);\r\n        &:before,\r\n        &:after {\r\n          background: var(--color-main-900);\r\n        }\r\n        &:focus {\r\n          outline: none;\r\n        }\r\n      }\r\n    }\r\n\r\n    .modal-content {\r\n      overflow: initial;\r\n    }\r\n    .modal-body {\r\n      background: var(--color-white);\r\n      padding: 0;\r\n    }\r\n    .modal {\r\n      background: var(--color-white);\r\n    }\r\n\r\n    .nav-tabs {\r\n      margin-bottom: var(--element-margin-l);\r\n      height: auto;\r\n      li {\r\n        border-color: var(--tab-normal);\r\n        margin-left: 0;\r\n        button {\r\n          font-size: var(--size-title);\r\n          color: var(--tab-normal);\r\n          white-space: nowrap;\r\n          height: 100%;\r\n          width: 100%;\r\n          text-transform: capitalize;\r\n          padding-bottom: var(--button-padding-m);\r\n          margin-bottom: var(--element-margin-s);\r\n          &:focus {\r\n            outline: none;\r\n          }\r\n        }\r\n        &.active {\r\n          border-color: var(--color-main-700);\r\n          > button {\r\n            color: var(--color-main-700);\r\n            font-size: var(--size-title);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .checkbox-container {\r\n      .checkbox {\r\n        &-icon:before {\r\n          border-bottom: var(--border-width-default) solid\r\n            var(--BG-button-primary);\r\n          border-right: var(--border-width-default) solid\r\n            var(--BG-button-primary);\r\n        }\r\n        &-text {\r\n          color: var(--color-main-900);\r\n        }\r\n      }\r\n    }\r\n    .button--submit {\r\n      background-color: var(--color-main-800);\r\n      color: var(--color-white);\r\n      &:hover {\r\n        background-color: var(--color-main-700);\r\n      }\r\n    }\r\n\r\n    .form-input {\r\n      margin-bottom: var(--element-margin-s);\r\n      input {\r\n        color: var(--color-main-900);\r\n        border-color: var(--color-main-500);\r\n        &:hover {\r\n          border-color: var(--color-main-900);\r\n        }\r\n        &:focus {\r\n          border-color: var(--color-main-700);\r\n        }\r\n        &::placeholder {\r\n          color: var(--color-main-500);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}