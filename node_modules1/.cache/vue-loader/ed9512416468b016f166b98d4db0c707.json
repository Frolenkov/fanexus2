{"remainingRequest":"F:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Projects\\fanexus\\src\\components\\Community\\CommunityModerators.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Projects\\fanexus\\src\\components\\Community\\CommunityModerators.vue","mtime":1598358775321},{"path":"F:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOw0KaW1wb3J0IHsNCiAgY29tbXVuaXR5QXJlYXMsDQogIGdldE1vZGVyYXRvcnMsDQogIHJlbW92ZU1vZGVyYXRvcnMNCn0gZnJvbSAnQC9zZXJ2aWNlcy9Db21tdW5pdHkvY29tbXVuaXR5LnNlcnZpY2UnOw0KaW1wb3J0IEdyb3VwQ29tcG9uZW50IGZyb20gJ0AvY29tcG9uZW50cy9CbG9nL0dyb3VwQ29tcG9uZW50JzsNCmltcG9ydCBUYWJDb250ZW50R3JpZCBmcm9tICcuLi9jb21tb24vVGFiQ29udGVudEdyaWQnOw0KaW1wb3J0IENvbmZpcm1hdGlvbk1vZGFsIGZyb20gJy4uL2NvbW1vbi9Db25maXJtYXRpb25Nb2RhbCc7DQppbXBvcnQgeyBkZWxldGVJdGVtQnlJZCB9IGZyb20gJ0AvdXRpbHMvYXJyYXknOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6IGNvbW11bml0eUFyZWFzLm1vZGVyYXRvcnMsDQogIGNvbXBvbmVudHM6IHsNCiAgICBHcm91cENvbXBvbmVudCwNCiAgICBUYWJDb250ZW50R3JpZCwNCiAgICBDb25maXJtYXRpb25Nb2RhbA0KICB9LA0KICBwcm9wczogew0KICAgIGNvbW11bml0eUlkOiB7DQogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLA0KICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGRhdGE6IG51bGwsDQogICAgICBncm91cHM6IFtdLA0KICAgICAgYWN0aXZlSXRlbTogbnVsbCwNCiAgICAgIHNldHRpbmdzOiB7DQogICAgICAgIHNob3c6IGZhbHNlLA0KICAgICAgICB0aXRsZTogJ0RlbGV0ZSBtb2RlcmF0b3InLA0KICAgICAgICAvKiogQFRPRE8gbWFrZSAnQ2FuY2VsJyBhIGRlZmF1bHQgZGlzbWlzc1RleHQgICovDQogICAgICAgIHJlbW92ZWRJdGVtOiAndXNlcicsDQogICAgICAgIHJlbW92ZWRGcm9tOiAnbW9kZXJhdG9ycycsDQogICAgICAgIGRpc21pc3NUZXh0OiAnQ2FuY2VsJywNCiAgICAgICAgYWN0aW9uVGV4dDogJ0RlbGV0ZScsDQogICAgICAgIGRhdGE6IFtdDQogICAgICB9LA0KICAgICAgZHJvcGRvd25PcHRpb25zTW9kZXJhdG9yczogWw0KICAgICAgICB7DQogICAgICAgICAgdGV4dDogJ0RlbGV0ZSBtb2RlcmF0b3InLA0KICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZScsDQogICAgICAgICAgc3BlY2lhbDogdHJ1ZSwNCiAgICAgICAgICB0b2dnbGFibGU6IGZhbHNlDQogICAgICAgIH0NCiAgICAgIF0NCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlTW9kYWxPcGVuKG1vZGFsVHlwZSkgew0KICAgICAgdGhpcy4kZW1pdCgnb3Blbk1vZGFsJywgeyB0eXBlOiBtb2RhbFR5cGUgfSk7DQogICAgfSwNCiAgICBzaG93TW9kYWwoaWQpIHsNCiAgICAgIHRoaXMuYWN0aXZlSXRlbSA9IGlkOw0KICAgICAgdGhpcy5zZXR0aW5ncy5zaG93ID0gdHJ1ZTsNCiAgICB9LA0KICAgIHJlbW92ZUl0ZW1Gcm9tQXJyYXkoKSB7DQogICAgICBkZWxldGVJdGVtQnlJZCh0aGlzLmFjdGl2ZUl0ZW0sIHRoaXMuZ3JvdXBzLCAoKSA9PiB7DQogICAgICAgIHRoaXMuYWN0aXZlSXRlbSA9IG51bGw7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGFzeW5jIGRlbGV0ZU1vZGVyYXRvcigpIHsNCiAgICAgIGNvbnN0IHBheWxvYWQgPSB7DQogICAgICAgIGFsaWFzOiB0aGlzLmFjdGl2ZUFsaWFzSWQsDQogICAgICAgIG1vZGVyYXRvcnM6IFt0aGlzLmFjdGl2ZUl0ZW1dDQogICAgICB9Ow0KICAgICAgdHJ5IHsNCiAgICAgICAgYXdhaXQgcmVtb3ZlTW9kZXJhdG9ycyh0aGlzLmNvbW11bml0eUlkLCBwYXlsb2FkKTsNCiAgICAgICAgdGhpcy5yZW1vdmVJdGVtRnJvbUFycmF5KCk7DQogICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIGdldERhdGEoZmlsdGVyQnkpIHsNCiAgICAgIHRoaXMuZ3JvdXBzID0gYXdhaXQgZ2V0TW9kZXJhdG9ycyh0aGlzLmNvbW11bml0eUlkLCAxLCBmaWx0ZXJCeSk7DQogICAgfSwNCiAgICBhc3luYyBoYW5kbGVJbnB1dChpbnB1dCkgew0KICAgICAgYXdhaXQgdGhpcy5nZXREYXRhKGlucHV0KTsNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwU3RhdGUoew0KICAgICAgYWN0aXZlQWxpYXNJZDogc3RhdGUgPT4gc3RhdGUuYWxpYXMuYWN0aXZlQWxpYXNJZA0KICAgIH0pDQogIH0sDQogIGFzeW5jIG1vdW50ZWQoKSB7DQogICAgYXdhaXQgdGhpcy5nZXREYXRhKCk7DQogIH0NCn07DQo="},{"version":3,"sources":["CommunityModerators.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CommunityModerators.vue","sourceRoot":"src/components/Community","sourcesContent":["<template>\r\n  <section class=\"moderators\">\r\n    <tab-content-grid\r\n      :showSearch=\"true\"\r\n      title=\"Moderators\"\r\n      @handle-input=\"handleInput\"\r\n    >\r\n      <group-component\r\n        group-component-type=\"blog\"\r\n        :link=\"link\"\r\n        v-for=\"({ id, name, avatar, updatedAt, Blog: { link } },\r\n        index) in groups\"\r\n        :key=\"`${id}-${index}`\"\r\n        @delete=\"showModal(id)\"\r\n        activityName=\"Updated at\"\r\n        :date=\"updatedAt\"\r\n        :name=\"name\"\r\n        :options=\"dropdownOptionsModerators\"\r\n        :userHasEditPermissions=\"data && data.userHasEditPermissions\"\r\n        :image=\"avatar ? avatar.src : ''\"\r\n      />\r\n      <confirmation-modal\r\n        @submit=\"deleteModerator\"\r\n        v-if=\"settings.show\"\r\n        :settings=\"settings\"\r\n      />\r\n    </tab-content-grid>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\nimport {\r\n  communityAreas,\r\n  getModerators,\r\n  removeModerators\r\n} from '@/services/Community/community.service';\r\nimport GroupComponent from '@/components/Blog/GroupComponent';\r\nimport TabContentGrid from '../common/TabContentGrid';\r\nimport ConfirmationModal from '../common/ConfirmationModal';\r\nimport { deleteItemById } from '@/utils/array';\r\n\r\nexport default {\r\n  name: communityAreas.moderators,\r\n  components: {\r\n    GroupComponent,\r\n    TabContentGrid,\r\n    ConfirmationModal\r\n  },\r\n  props: {\r\n    communityId: {\r\n      type: [Number, String],\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      data: null,\r\n      groups: [],\r\n      activeItem: null,\r\n      settings: {\r\n        show: false,\r\n        title: 'Delete moderator',\r\n        /** @TODO make 'Cancel' a default dismissText  */\r\n        removedItem: 'user',\r\n        removedFrom: 'moderators',\r\n        dismissText: 'Cancel',\r\n        actionText: 'Delete',\r\n        data: []\r\n      },\r\n      dropdownOptionsModerators: [\r\n        {\r\n          text: 'Delete moderator',\r\n          action: 'delete',\r\n          special: true,\r\n          togglable: false\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  methods: {\r\n    handleModalOpen(modalType) {\r\n      this.$emit('openModal', { type: modalType });\r\n    },\r\n    showModal(id) {\r\n      this.activeItem = id;\r\n      this.settings.show = true;\r\n    },\r\n    removeItemFromArray() {\r\n      deleteItemById(this.activeItem, this.groups, () => {\r\n        this.activeItem = null;\r\n      });\r\n    },\r\n    async deleteModerator() {\r\n      const payload = {\r\n        alias: this.activeAliasId,\r\n        moderators: [this.activeItem]\r\n      };\r\n      try {\r\n        await removeModerators(this.communityId, payload);\r\n        this.removeItemFromArray();\r\n      } catch (e) {\r\n        return false;\r\n      }\r\n    },\r\n    async getData(filterBy) {\r\n      this.groups = await getModerators(this.communityId, 1, filterBy);\r\n    },\r\n    async handleInput(input) {\r\n      await this.getData(input);\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      activeAliasId: state => state.alias.activeAliasId\r\n    })\r\n  },\r\n  async mounted() {\r\n    await this.getData();\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n::v-deep .group-title {\r\n  &__text {\r\n    font-size: var(--size-button);\r\n  }\r\n}\r\n</style>\r\n"]}]}