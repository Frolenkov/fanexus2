{"remainingRequest":"I:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!I:\\Projects\\fanexus\\src\\views\\Community.vue?vue&type=style&index=0&id=5f8a91fb&lang=scss&scoped=true&","dependencies":[{"path":"I:\\Projects\\fanexus\\src\\views\\Community.vue","mtime":1590040091980},{"path":"I:\\Projects\\fanexus\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\style-resources-loader\\lib\\index.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5jb21tdW5pdHkgew0KICBncmlkLWFyZWE6IGNvbnRlbnQ7DQogIG92ZXJmbG93OiBhdXRvOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1CRy1wcmltYXJ5KTsNCg0KICA6OnYtZGVlcCAmLXRhYnMgLm5hdi10YWJzIGxpIGJ1dHRvbiB7DQogICAgZm9udC1zaXplOiB2YXIoLS1zaXplLWJ1dHRvbik7DQogICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCiAgfQ0KICAmLWhlYWRlciB7DQogICAgZGlzcGxheTogZ3JpZDsNCiAgICBhbGlnbi1pdGVtczogZW5kOw0KICAgIGdyaWQtdGVtcGxhdGUtcm93czogbWlubWF4KDAsIDYwcHgpOw0KICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogdmFyKC0td2lkdGgtc21hbGwpIG1heC1jb250ZW50IHZhcigtLXdpZHRoLXNtYWxsKTsNCiAgICBncmlkLWdhcDogdmFyKC0tZWxlbWVudC1tYXJnaW4teGwpOw0KICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLUJHLWJsb2ctcG9zdCk7DQogICAgcGFkZGluZzogMCB2YXIoLS1lbGVtZW50LXBhZGRpbmcteGwpOw0KICAgIG1hcmdpbi1ib3R0b206IHZhcigtLWVsZW1lbnQtbWFyZ2luLXhsKTsNCiAgfQ0KICAmLWNvbnRlbnQgew0KICAgIHBhZGRpbmc6IDAgdmFyKC0tZWxlbWVudC1wYWRkaW5nLXhsKTsNCiAgICBkaXNwbGF5OiBncmlkOw0KICAgIGdyaWQtZ2FwOiB2YXIoLS1lbGVtZW50LXBhZGRpbmcteGwpOw0KICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogdmFyKC0td2lkdGgtc21hbGwpIGF1dG8gdmFyKC0td2lkdGgtc21hbGwpOw0KICB9DQp9DQo="},{"version":3,"sources":["Community.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8QA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Community.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div v-if=\"data\" class=\"community\">\r\n    <!-- @TODO revise it -->\r\n    <wallpaper v-if=\"data.coverImage\" :src=\"data.coverImage.src\" />\r\n    <add-image v-else buttonText=\"Add Background\" />\r\n    <div class=\"community-header\">\r\n      <div class=\"community-wrapper\"></div>\r\n      <tabs\r\n        :tabs=\"navTabs\"\r\n        @selectTab=\"$active => setComponent($active, $active)\"\r\n        :active=\"activeTab\"\r\n      />\r\n    </div>\r\n    <div class=\"community-content\">\r\n      <div class=\"community-wrapper\">\r\n        <!-- @TODO revise it -->\r\n        <sidebar-form v-if=\"sidebarCreate\" />\r\n        <sidebar-info\r\n          :name=\"data.name\"\r\n          :description=\"data.description\"\r\n          :links=\"data.links\"\r\n          :isSubscribe=\"data.aliasIsMember\"\r\n          v-else\r\n          @subscribe=\"subscribeToCommunity\"\r\n          @unsubscribe=\"unsubscribeFromCommunity\"\r\n        />\r\n      </div>\r\n      <div class=\"community-main\">\r\n        <!-- @TODO take data.rules from back  -->\r\n        <component\r\n          :is=\"currentComponent\"\r\n          :data=\"data\"\r\n          @openModal=\"handleModalOpen\"\r\n          :rules=\"rules\"\r\n          :communityId=\"id\"\r\n        />\r\n      </div>\r\n      <div class=\"community-wrapper\">\r\n        <!-- @TODO make it dynamically -->\r\n        <sidebar-tags\r\n          :tags=\"data.tags\"\r\n          createText=\"Tags of your posts will be shown here. You may add them, but others will see them only when you use them in your posts.\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <moderation-request-modal\r\n      :settings=\"moderationModalSettings\"\r\n      :data=\"moderationModalData\"\r\n    />\r\n    <members-modal\r\n      v-if=\"modalSettings[modalType].show\"\r\n      :modalType=\"modalType\"\r\n      :settings=\"modalSettings[modalType]\"\r\n      :communityId=\"data.id\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport getComponentsByPrefix from '@/utils/getComponentsByPrefix';\r\nimport {\r\n  communityModalTypes,\r\n  communityAreas,\r\n  communityRoot,\r\n  getCommunity,\r\n  joinCommunity,\r\n  removeFromCommunity\r\n} from '@/services/community.service';\r\nimport MembersModal from '@/components/Community/MembersModal';\r\nimport Avatar from '~common/Avatar';\r\nimport Tabs from '~common/Tabs';\r\nimport tabsMixin from '@/mixins/tabs.mixin';\r\nimport SidebarForm from '~common/SidebarForm';\r\nimport SidebarInfo from '~common/SidebarInfo';\r\nimport SidebarTags from '~common/SidebarTags';\r\nimport Wallpaper from '~common/Wallpaper';\r\nimport AddImage from '~common/AddImage';\r\nimport BlogSettings from '@/components/Blog/BlogSettings';\r\nimport ModerationRequestModal from '@/components/Community/ModerationRequestModal';\r\nimport CommunityMembers from '@/components/Community/CommunityMembers';\r\nimport CommunityModerators from '@/components/Community/CommunityModerators';\r\nimport CommunityRules from '@/components/Community/CommunityRules';\r\nimport CommunityRequests from '@/components/Community/CommunityRequests';\r\nimport CommunityCreateRules from '@/components/Community/CommunityCreateRules';\r\n\r\nexport default {\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    // @TODO revise it\r\n    sidebarCreate: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  components: {\r\n    ModerationRequestModal,\r\n    Avatar,\r\n    Tabs,\r\n    SidebarForm,\r\n    SidebarTags,\r\n    AddImage,\r\n    BlogSettings,\r\n    SidebarInfo,\r\n    Wallpaper,\r\n    MembersModal,\r\n    CommunityCreateRules,\r\n    // communityAreas (the order should be strict)\r\n    CommunityMembers,\r\n    CommunityRules,\r\n    CommunityModerators,\r\n    CommunityRequests\r\n  },\r\n  mixins: [tabsMixin],\r\n  data() {\r\n    return {\r\n      data: null,\r\n      currentPage: 1,\r\n      activeTab: 0,\r\n      currentComponent: null,\r\n      // @TODO talk with Dorian about type of data.rules\r\n      rules: [\r\n        {\r\n          ruleHeading: 'Rule Name',\r\n          ruleText:\r\n            'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Iste, incidunt.',\r\n          descriptionId: 1,\r\n          nameId: 2\r\n        }\r\n      ],\r\n      navTabs: [\r\n        {\r\n          title: 'Members',\r\n          component: communityAreas.members\r\n        },\r\n        {\r\n          title: 'Rules',\r\n          component: communityAreas.rules\r\n        },\r\n        {\r\n          title: 'Moderators',\r\n          component: communityAreas.moderators\r\n        },\r\n        {\r\n          title: 'Requests',\r\n          component: communityAreas.requests\r\n        }\r\n      ],\r\n      moderationModalSettings: {\r\n        show: false,\r\n        title: 'Moderation request',\r\n        dismissText: 'Decline',\r\n        actionText: 'Accept'\r\n      },\r\n      communityModalTypes,\r\n      modalType: communityModalTypes.addMembers,\r\n      modalSettings: {\r\n        [communityModalTypes.addMembers]: {\r\n          show: false,\r\n          title: 'Choose new members of the security group',\r\n          dismissText: 'Cancel',\r\n          actionText: '+ Add'\r\n        },\r\n        [communityModalTypes.deleteMembers]: {\r\n          show: false,\r\n          title: 'Choose members to delete from the privacy group',\r\n          dismissText: 'Cancel',\r\n          actionText: 'Delete'\r\n        }\r\n      },\r\n      //@TODO change to real data\r\n      moderationModalData: {\r\n        alias: {\r\n          name: 'community name',\r\n          image:\r\n            'https://cdn2.iconfinder.com/data/icons/super-hero/154/batman-comics-hero-avatar-head-mask-512.png'\r\n        },\r\n        content:\r\n          \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum\",\r\n        image: {\r\n          src:\r\n            'https://i.pinimg.com/originals/2b/52/7d/2b527dfbe670cd5a746425eb30e2740d.jpg',\r\n          name: 'gotham city'\r\n        },\r\n        tags: [\r\n          {\r\n            id: 5202200931223649,\r\n            name: 'batman'\r\n          },\r\n          {\r\n            id: 139573284492231,\r\n            name: 'gotham'\r\n          },\r\n          {\r\n            id: 139573284492232,\r\n            name: 'gotham'\r\n          },\r\n          {\r\n            id: 139573284492233,\r\n            name: 'gotham'\r\n          },\r\n          {\r\n            id: 139573284492234,\r\n            name: 'gotham'\r\n          },\r\n          {\r\n            id: 139573284492235,\r\n            name: 'gotham'\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    communityComponents() {\r\n      return getComponentsByPrefix.call(this, communityRoot);\r\n    }\r\n  },\r\n  methods: {\r\n    async getData() {\r\n      try {\r\n        this.data = await getCommunity(this.id, this.currentPage);\r\n      } catch (e) {\r\n        return false;\r\n      }\r\n    },\r\n    // @TODO change payload */\r\n    async subscribeToCommunity() {\r\n      const payload = {\r\n        alias: 1\r\n      };\r\n      try {\r\n        await joinCommunity(this.data.id, payload);\r\n        this.data.aliasIsMember = true;\r\n      } catch (e) {\r\n        return false;\r\n      }\r\n    },\r\n    // @TODO implement in future*/\r\n    async unsubscribeFromCommunity() {\r\n      const payload = {\r\n        alias: 1,\r\n        removeMemberId: 1\r\n      };\r\n      try {\r\n        await removeFromCommunity(this.data.id, payload);\r\n        this.data.aliasIsMember = false;\r\n      } catch (e) {\r\n        return false;\r\n      }\r\n    },\r\n    handleModalOpen(modalType) {\r\n      this.modalType = modalType;\r\n      this.modalSettings[modalType].show = true;\r\n    },\r\n    setComponent(tabIndex = 0, componentIndex = 0) {\r\n      this.handleSetActiveTab(tabIndex);\r\n      this.currentComponent = this.communityComponents[componentIndex];\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.getData();\r\n    this.setComponent();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.community {\r\n  grid-area: content;\r\n  overflow: auto;\r\n  background-color: var(--BG-primary);\r\n\r\n  ::v-deep &-tabs .nav-tabs li button {\r\n    font-size: var(--size-button);\r\n    text-transform: uppercase;\r\n  }\r\n  &-header {\r\n    display: grid;\r\n    align-items: end;\r\n    grid-template-rows: minmax(0, 60px);\r\n    grid-template-columns: var(--width-small) max-content var(--width-small);\r\n    grid-gap: var(--element-margin-xl);\r\n    background-color: var(--BG-blog-post);\r\n    padding: 0 var(--element-padding-xl);\r\n    margin-bottom: var(--element-margin-xl);\r\n  }\r\n  &-content {\r\n    padding: 0 var(--element-padding-xl);\r\n    display: grid;\r\n    grid-gap: var(--element-padding-xl);\r\n    grid-template-columns: var(--width-small) auto var(--width-small);\r\n  }\r\n}\r\n</style>\r\n"]}]}