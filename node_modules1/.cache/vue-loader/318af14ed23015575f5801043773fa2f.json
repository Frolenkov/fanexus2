{"remainingRequest":"F:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Projects\\fanexus\\src\\components\\Community\\CommunityModerators.vue?vue&type=style&index=0&id=3b614111&lang=scss&scoped=true&","dependencies":[{"path":"F:\\Projects\\fanexus\\src\\components\\Community\\CommunityModerators.vue","mtime":1598358775321},{"path":"F:\\Projects\\fanexus\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\style-resources-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCjo6di1kZWVwIC5ncm91cC10aXRsZSB7DQogICZfX3RleHQgew0KICAgIGZvbnQtc2l6ZTogdmFyKC0tc2l6ZS1idXR0b24pOw0KICB9DQp9DQo="},{"version":3,"sources":["CommunityModerators.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2HA;AACA;AACA;AACA;AACA","file":"CommunityModerators.vue","sourceRoot":"src/components/Community","sourcesContent":["<template>\r\n  <section class=\"moderators\">\r\n    <tab-content-grid\r\n      :showSearch=\"true\"\r\n      title=\"Moderators\"\r\n      @handle-input=\"handleInput\"\r\n    >\r\n      <group-component\r\n        group-component-type=\"blog\"\r\n        :link=\"link\"\r\n        v-for=\"({ id, name, avatar, updatedAt, Blog: { link } },\r\n        index) in groups\"\r\n        :key=\"`${id}-${index}`\"\r\n        @delete=\"showModal(id)\"\r\n        activityName=\"Updated at\"\r\n        :date=\"updatedAt\"\r\n        :name=\"name\"\r\n        :options=\"dropdownOptionsModerators\"\r\n        :userHasEditPermissions=\"data && data.userHasEditPermissions\"\r\n        :image=\"avatar ? avatar.src : ''\"\r\n      />\r\n      <confirmation-modal\r\n        @submit=\"deleteModerator\"\r\n        v-if=\"settings.show\"\r\n        :settings=\"settings\"\r\n      />\r\n    </tab-content-grid>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\nimport {\r\n  communityAreas,\r\n  getModerators,\r\n  removeModerators\r\n} from '@/services/Community/community.service';\r\nimport GroupComponent from '@/components/Blog/GroupComponent';\r\nimport TabContentGrid from '../common/TabContentGrid';\r\nimport ConfirmationModal from '../common/ConfirmationModal';\r\nimport { deleteItemById } from '@/utils/array';\r\n\r\nexport default {\r\n  name: communityAreas.moderators,\r\n  components: {\r\n    GroupComponent,\r\n    TabContentGrid,\r\n    ConfirmationModal\r\n  },\r\n  props: {\r\n    communityId: {\r\n      type: [Number, String],\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      data: null,\r\n      groups: [],\r\n      activeItem: null,\r\n      settings: {\r\n        show: false,\r\n        title: 'Delete moderator',\r\n        /** @TODO make 'Cancel' a default dismissText  */\r\n        removedItem: 'user',\r\n        removedFrom: 'moderators',\r\n        dismissText: 'Cancel',\r\n        actionText: 'Delete',\r\n        data: []\r\n      },\r\n      dropdownOptionsModerators: [\r\n        {\r\n          text: 'Delete moderator',\r\n          action: 'delete',\r\n          special: true,\r\n          togglable: false\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  methods: {\r\n    handleModalOpen(modalType) {\r\n      this.$emit('openModal', { type: modalType });\r\n    },\r\n    showModal(id) {\r\n      this.activeItem = id;\r\n      this.settings.show = true;\r\n    },\r\n    removeItemFromArray() {\r\n      deleteItemById(this.activeItem, this.groups, () => {\r\n        this.activeItem = null;\r\n      });\r\n    },\r\n    async deleteModerator() {\r\n      const payload = {\r\n        alias: this.activeAliasId,\r\n        moderators: [this.activeItem]\r\n      };\r\n      try {\r\n        await removeModerators(this.communityId, payload);\r\n        this.removeItemFromArray();\r\n      } catch (e) {\r\n        return false;\r\n      }\r\n    },\r\n    async getData(filterBy) {\r\n      this.groups = await getModerators(this.communityId, 1, filterBy);\r\n    },\r\n    async handleInput(input) {\r\n      await this.getData(input);\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      activeAliasId: state => state.alias.activeAliasId\r\n    })\r\n  },\r\n  async mounted() {\r\n    await this.getData();\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n::v-deep .group-title {\r\n  &__text {\r\n    font-size: var(--size-button);\r\n  }\r\n}\r\n</style>\r\n"]}]}