{"remainingRequest":"F:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Projects\\fanexus\\src\\components\\Blog\\BlogPrivacyGroup.vue?vue&type=style&index=0&id=57be9ef4&lang=scss&scoped=true&","dependencies":[{"path":"F:\\Projects\\fanexus\\src\\components\\Blog\\BlogPrivacyGroup.vue","mtime":1598358809716},{"path":"F:\\Projects\\fanexus\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\style-resources-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoucHJpdmFjeS1ncm91cCB7DQogIGdyaWQtYXJlYTogY29udGVudDsNCiAgcGFkZGluZzogdmFyKC0tZWxlbWVudC1wYWRkaW5nLXhsKTsNCiAgb3ZlcmZsb3c6IGF1dG87DQogIGJhY2tncm91bmQtY29sb3I6IHZhcigtLUJHLXByaW1hcnkpOw0KICBkaXNwbGF5OiBmbGV4Ow0KDQogIDo6di1kZWVwIGlucHV0IHsNCiAgICB3aWR0aDogdmFyKC0td2lkdGgtbWVkaXVtLXNtYWxsKTsNCiAgfQ0KDQogIDo6di1kZWVwIC50b2dnbGVyLXNldHRpbmdzIHsNCiAgICBtYXJnaW4tdG9wOiB2YXIoLS1lbGVtZW50LW1hcmdpbi1zKTsNCiAgICAmIGlucHV0IHsNCiAgICAgIHdpZHRoOiBhdXRvOw0KICAgIH0NCiAgfQ0KDQogIGg0IHsNCiAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsNCiAgICBtYXJnaW4tdG9wOiB2YXIoLS1lbGVtZW50LW1hcmdpbi1zKTsNCiAgfQ0KDQogICYtbGlzdCB7DQogICAgZmxleC1ncm93OiAxOw0KICAgIGZsZXgtYmFzaXM6IDA7DQogIH0NCg0KICAmX19kaXNwbGF5IHsNCiAgICBmbGV4LWdyb3c6IDQ7DQogICAgZmxleC1iYXNpczogMDsNCiAgICBwYWRkaW5nOiB2YXIoLS1lbGVtZW50LXBhZGRpbmctbSk7DQogIH0NCg0KICAmX191c2VyLXNlYXJjaCB7DQogICAgbWFyZ2luOiB2YXIoLS1lbGVtZW50LW1hcmdpbi1tKSAwOw0KICAgIGRpc3BsYXk6IHJlbGF0aXZlOw0KDQogICAgJi1yZXN1bHQgew0KICAgICAgbGVmdDogdmFyKC0tZWxlbWVudC1wYWRkaW5nLXhzKTsNCiAgICAgIHRvcDogMTAwJTsNCiAgICAgIGJvcmRlcjogdmFyKC0tYm9yZGVyLXdpZHRoLXRoaW4pIHNvbGlkIHZhcigtLWJvcmRlci10YWcpOw0KICAgICAgcGFkZGluZzogdmFyKC0tZWxlbWVudC1wYWRkaW5nLXMpOw0KICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cyk7DQogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1CRy1kcm9wZG93bik7DQogICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAmLWVudHJ5IHsNCiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7DQogICAgICAgIHBhZGRpbmc6IHZhcigtLWVsZW1lbnQtcGFkZGluZy14cyk7DQogICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMpOw0KDQogICAgICAgICY6aG92ZXIgew0KICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLUJHLWJ1dHRvbi1wcmltYXJ5LWhvdmVyKTsNCiAgICAgICAgICBjb2xvcjogdmFyKC0tdGFiLWFjdGl2ZSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCg0KICAmX19tZW1iZXJzLWxpc3Qgew0KICAgIGxpc3Qtc3R5bGU6IG5vbmU7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgJi1pdGVtIHsNCiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpOw0KICAgICAgZm9udC1zaXplOiB2YXIoLS1zaXplLXNtYWxsKTsNCiAgICAgIHBhZGRpbmc6IHZhcigtLWVsZW1lbnQtcGFkZGluZy14cyk7DQogICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItdGFnKTsNCiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMpOw0KICAgICAgbWFyZ2luOiB2YXIoLS1lbGVtZW50LW1hcmdpbi14cyk7DQogICAgfQ0KICB9DQoNCiAgJl9fZGVsZXRlLWJ1dHRvbiB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZXJyb3IpOw0KICAgIGJvcmRlci1jb2xvcjogdmFyKC0tZXJyb3IpOw0KICAgIGNvbG9yOiB2YXIoLS1jb2xvci13aGl0ZSk7DQogICAgJjpob3ZlciB7DQogICAgICBjb2xvcjogdmFyKC0tY29sb3Itd2hpdGUpOw0KICAgIH0NCiAgfQ0KfQ0KDQo6OnYtZGVlcCAudGFiLWNvbnRlbnQgew0KICBncmlkLWNvbHVtbi1nYXA6IHZhcigtLWVsZW1lbnQtbWFyZ2luLXhsKTsNCn0NCg0KOjp2LWRlZXAgLmZvcm0taW5wdXQgew0KICBpbnB1dCB7DQogICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1ib3JkZXItaW5wdXQtc2VhcmNoKTsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1CRy1ibG9nLXBvc3QpOw0KICB9DQp9DQoNCi5jcm9zcy1idXR0b24gew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50Ow0KICBvdXRsaW5lOiBub25lOw0KDQogICZfX2ljb24gew0KICAgIHN0cm9rZS13aWR0aDogNXB4Ow0KICAgIHN0cm9rZTogdmFyKC0tdGV4dC1wcmltYXJ5KTsNCiAgICB3aWR0aDogMTBweDsNCiAgICBoZWlnaHQ6IDhweDsNCiAgfQ0KfQ0K"},{"version":3,"sources":["BlogPrivacyGroup.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuPA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BlogPrivacyGroup.vue","sourceRoot":"src/components/Blog","sourcesContent":["<template>\r\n  <section class=\"privacy-group\">\r\n    <!--  @TODO make it dynamic -->\r\n\r\n    <!--  @TODO adjust the UI in accordance with the existing style guide, see https://temperance-software.atlassian.net/browse/FAN-271 -->\r\n    <privacy-group-list\r\n      class=\"privacy-group-list\"\r\n      :privacy-groups=\"privacyGroups\"\r\n      :current-privacy-group=\"currentPrivacyGroup\"\r\n      @create-new-privacy-group=\"createPrivacyGroupAndSelect\"\r\n      @set-privacy-group=\"setPrivacyGroup\"\r\n    />\r\n    <div class=\"privacy-group__display\">\r\n      <form v-if=\"currentPrivacyGroup.id\">\r\n        <div\r\n          v-for=\"(privacyOption, index) in privacyOptions\"\r\n          :key=\"`${privacyOption.name}-${index}`\"\r\n        >\r\n          <h4\r\n            class=\"privacy-option__title\"\r\n            v-if=\"privacyOption.type === 'radio-button'\"\r\n          >\r\n            {{ privacyOption.title }}\r\n          </h4>\r\n          <component\r\n            v-if=\"!privacyOption.selections\"\r\n            :is=\"`form-${privacyOption.type}`\"\r\n            :name=\"privacyOption.name\"\r\n            v-model=\"currentPrivacyGroup[privacyOption.name]\"\r\n            :labelText=\"privacyOption.title\"\r\n            :placeholder=\"privacyOption.title\"\r\n            context=\"settings\"\r\n            v-slot:after\r\n            >{{ privacyOption.title }}</component\r\n          >\r\n          <form-radio-button\r\n            v-else\r\n            :name=\"privacyOption.name\"\r\n            v-for=\"(selection, index) in privacyOption.selections\"\r\n            :key=\"`${selection.value}-${index}`\"\r\n            :value=\"selection.value\"\r\n            v-model=\"currentPrivacyGroup[privacyOption.name]\"\r\n            :no-pristine=\"true\"\r\n            >{{ selection.description }}</form-radio-button\r\n          >\r\n        </div>\r\n        <template\r\n          v-if=\"[3, 4].includes(currentPrivacyGroup.accessControlSetting)\"\r\n        >\r\n          <h4 class=\"privacy-group__title\">Aliases</h4>\r\n          <div class=\"privacy-group__user-search\">\r\n            <form-input\r\n              class=\"privacy-group__user-search-input\"\r\n              type=\"search\"\r\n              name=\"find-blog\"\r\n              placeholder=\"Find blog to add\"\r\n              v-model=\"findAliasInput\"\r\n              @focus=\"startInputAlias\"\r\n              @blur=\"endInputAlias\"\r\n            />\r\n            <div\r\n              class=\"privacy-group__user-search-result\"\r\n              v-if=\"inputtingAlias && findAliasesItems.length\"\r\n            >\r\n              <div\r\n                class=\"privacy-group__user-search-result-entry\"\r\n                v-for=\"(alias, index) of findAliasesItems\"\r\n                :key=\"`${alias.id}-${index}`\"\r\n                @mousedown=\"addMemberFromInput(alias)\"\r\n              >\r\n                {{ alias.name }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"privacy-group__members\">\r\n            <ul class=\"privacy-group__members-list\">\r\n              <li\r\n                class=\"privacy-group__members-list-item\"\r\n                v-for=\"(alias, index) of currentPrivacyGroup.aliases\"\r\n                :key=\"`${alias.id}-${index}`\"\r\n              >\r\n                {{ alias.name }}\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"cross-button\"\r\n                  @click.stop=\"\r\n                    removeMember({ privacyGroup: currentPrivacyGroup, alias })\r\n                  \"\r\n                >\r\n                  <cross-icon class=\"cross-button__icon\" />\r\n                </button>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <h4 class=\"privacy-group__title\">Auto-add members from</h4>\r\n          <privacy-group-selection\r\n            :value=\"currentPrivacyGroup.subsets\"\r\n            :current-privacy-group=\"currentPrivacyGroup\"\r\n            @add-privacy-group=\"\r\n              addSubset({ privacyGroup: currentPrivacyGroup, subset: $event })\r\n            \"\r\n            @remove-privacy-group=\"\r\n              removeSubset({\r\n                privacyGroup: currentPrivacyGroup,\r\n                subset: $event\r\n              })\r\n            \"\r\n          />\r\n        </template>\r\n        <form-button\r\n          class=\"privacy-group__delete-button\"\r\n          text=\"Delete privacy group\"\r\n          @click.stop=\"deletePrivacyGroupFromMenu(currentPrivacyGroup)\"\r\n        />\r\n      </form>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport GroupComponent from '@/components/Blog/GroupComponent';\r\nimport FormInput from '~common/Fields/FormInput';\r\nimport FormButton from '~common/Buttons/FormButton';\r\nimport FormToggler from '~common/Fields/FormToggler';\r\nimport FormRadioButton from '~common/Fields/FormRadioButton';\r\nimport PrivacyGroupList from '@/components/PrivacyGroup/PrivacyGroupList.vue';\r\nimport PrivacyGroupSelection from '@/components/PrivacyGroup/PrivacyGroupSelection.vue';\r\nimport { blogModalTypes, blogAreas } from '@/services/Blog/blog.service';\r\nimport { findAliases } from '@/services/alias.service';\r\nimport { privacyOptions } from '@/services/privacy-group.service';\r\nimport { mapState, mapActions } from 'vuex';\r\nimport CrossIcon from '~svg/cross-icon.svg';\r\nimport { getIndexById, getById } from '@/utils/array.js';\r\n\r\nexport default {\r\n  name: blogAreas.privacyGroup,\r\n  components: {\r\n    GroupComponent,\r\n    FormInput,\r\n    FormButton,\r\n    FormToggler,\r\n    FormRadioButton,\r\n    PrivacyGroupList,\r\n    PrivacyGroupSelection,\r\n    CrossIcon\r\n  },\r\n  data() {\r\n    return {\r\n      blogModalTypes,\r\n      currentPrivacyGroup: {\r\n        id: 0,\r\n        name: '',\r\n        isDefault: false,\r\n        accessControlSetting: 0,\r\n        aliases: [],\r\n        subsets: []\r\n      },\r\n      findAliasInput: '',\r\n      findAliasesItems: [],\r\n      inputtingAlias: false,\r\n      privacyOptions,\r\n      lastSubsetChange: 0\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      'createPrivacyGroup',\r\n      'updatePrivacyGroup',\r\n      'deletePrivacyGroup',\r\n      'addMember',\r\n      'removeMember',\r\n      'addSubset',\r\n      'removeSubset'\r\n    ]),\r\n    async setPrivacyGroup(privacyGroup) {\r\n      if (!privacyGroup.loaded) {\r\n        await privacyGroup.loadData();\r\n      }\r\n      const context = this;\r\n      this.currentPrivacyGroup = new Proxy(privacyGroup, {\r\n        set(target, name, value) {\r\n          context.updatePrivacyGroup({\r\n            privacyGroup,\r\n            params: {\r\n              accessControlSetting: privacyGroup.accessControlSetting,\r\n              [name]: value\r\n            }\r\n          });\r\n          return true;\r\n        }\r\n      });\r\n    },\r\n    async createPrivacyGroupAndSelect() {\r\n      await this.setPrivacyGroup(await this.createPrivacyGroup());\r\n    },\r\n    startInputAlias() {\r\n      this.inputtingAlias = true;\r\n    },\r\n    endInputAlias() {\r\n      this.inputtingAlias = false;\r\n    },\r\n    async addMemberFromInput(alias) {\r\n      this.addMember({ privacyGroup: this.currentPrivacyGroup, alias });\r\n      this.findAliasInput = '';\r\n    },\r\n    alreadyMember(alias) {\r\n      return getById(alias.id, this.currentPrivacyGroup.aliases);\r\n    },\r\n    async deletePrivacyGroupFromMenu(privacyGroupToDelete) {\r\n      const index = getIndexById(privacyGroupToDelete.id, this.privacyGroups);\r\n      await Promise.all([\r\n        this.setPrivacyGroup(\r\n          this.privacyGroups[index + 1] || this.privacyGroups[index - 1]\r\n        ),\r\n        this.deletePrivacyGroup({ id: privacyGroupToDelete.id, index })\r\n      ]);\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      activeAliasId: state => state.alias.activeAliasId,\r\n      privacyGroups: state => state.privacyGroup.list\r\n    })\r\n  },\r\n  watch: {\r\n    async findAliasInput(input) {\r\n      if (input) {\r\n        const aliases = await findAliases({\r\n          aliasPart: input,\r\n          alias: this.activeAliasId\r\n        });\r\n        this.findAliasesItems = aliases.filter(\r\n          alias => !this.alreadyMember(alias)\r\n        );\r\n      } else {\r\n        return (this.findAliasesItems = []);\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.privacyGroups.length) {\r\n      return this.setPrivacyGroup(this.privacyGroups[0]);\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.privacy-group {\r\n  grid-area: content;\r\n  padding: var(--element-padding-xl);\r\n  overflow: auto;\r\n  background-color: var(--BG-primary);\r\n  display: flex;\r\n\r\n  ::v-deep input {\r\n    width: var(--width-medium-small);\r\n  }\r\n\r\n  ::v-deep .toggler-settings {\r\n    margin-top: var(--element-margin-s);\r\n    & input {\r\n      width: auto;\r\n    }\r\n  }\r\n\r\n  h4 {\r\n    color: var(--text-primary);\r\n    margin-top: var(--element-margin-s);\r\n  }\r\n\r\n  &-list {\r\n    flex-grow: 1;\r\n    flex-basis: 0;\r\n  }\r\n\r\n  &__display {\r\n    flex-grow: 4;\r\n    flex-basis: 0;\r\n    padding: var(--element-padding-m);\r\n  }\r\n\r\n  &__user-search {\r\n    margin: var(--element-margin-m) 0;\r\n    display: relative;\r\n\r\n    &-result {\r\n      left: var(--element-padding-xs);\r\n      top: 100%;\r\n      border: var(--border-width-thin) solid var(--border-tag);\r\n      padding: var(--element-padding-s);\r\n      border-radius: var(--border-radius);\r\n      background-color: var(--BG-dropdown);\r\n      cursor: pointer;\r\n      &-entry {\r\n        color: var(--text-primary);\r\n        padding: var(--element-padding-xs);\r\n        border-radius: var(--border-radius);\r\n\r\n        &:hover {\r\n          background-color: var(--BG-button-primary-hover);\r\n          color: var(--tab-active);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  &__members-list {\r\n    list-style: none;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    &-item {\r\n      color: var(--text-primary);\r\n      font-size: var(--size-small);\r\n      padding: var(--element-padding-xs);\r\n      border: 1px solid var(--border-tag);\r\n      border-radius: var(--border-radius);\r\n      margin: var(--element-margin-xs);\r\n    }\r\n  }\r\n\r\n  &__delete-button {\r\n    background-color: var(--error);\r\n    border-color: var(--error);\r\n    color: var(--color-white);\r\n    &:hover {\r\n      color: var(--color-white);\r\n    }\r\n  }\r\n}\r\n\r\n::v-deep .tab-content {\r\n  grid-column-gap: var(--element-margin-xl);\r\n}\r\n\r\n::v-deep .form-input {\r\n  input {\r\n    border-color: var(--border-input-search);\r\n    background-color: var(--BG-blog-post);\r\n  }\r\n}\r\n\r\n.cross-button {\r\n  position: relative;\r\n  background: transparent;\r\n  outline: none;\r\n\r\n  &__icon {\r\n    stroke-width: 5px;\r\n    stroke: var(--text-primary);\r\n    width: 10px;\r\n    height: 8px;\r\n  }\r\n}\r\n</style>\r\n"]}]}