{"remainingRequest":"F:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js!F:\\Projects\\fanexus\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\Projects\\fanexus\\src\\services\\rich-text-editor.service.js","dependencies":[{"path":"F:\\Projects\\fanexus\\src\\services\\rich-text-editor.service.js","mtime":1597735669227},{"path":"F:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRjpcXFByb2plY3RzXFxmYW5leHVzXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgY3JlYXRlRm9ybURhdGEsIGltYWdlVXBsb2FkIH0gZnJvbSAnQC9zZXJ2aWNlcy9pbWFnZS5zZXJ2aWNlJzsKZXhwb3J0IHZhciBhY3Rpb25zID0gewogIGZvcm1hdEJsb2NrOiAnZm9ybWF0QmxvY2snLAogIGZvcm1hdEJsb2NrSDE6ICdmb3JtYXRCbG9ja0gxJywKICBmb3JtYXRCbG9ja0gyOiAnZm9ybWF0QmxvY2tIMicsCiAgdXBsb2FkSW1hZ2U6ICd1cGxvYWRJbWFnZScsCiAgZm9ybWF0QmxvY2txdW90ZTogJ2Zvcm1hdEJsb2NrcXVvdGUnCn07CmV4cG9ydCB2YXIgY29tbWFuZHMgPSBbewogIGlkOiAxLAogIHR5cGU6ICdib2xkJywKICBpY29uOiAnYm9sZCcKfSwgewogIGlkOiAyLAogIHR5cGU6ICdpdGFsaWMnLAogIGljb246ICdpdGFsaWMnCn0sIHsKICBpZDogMywKICB0eXBlOiAndW5kZXJsaW5lJywKICBpY29uOiAndW5kZXJsaW5lJwp9LCB7CiAgaWQ6IDQsCiAgdHlwZTogJ3N0cmlrZVRocm91Z2gnLAogIGljb246ICdzdHJpa2VUaHJvdWdoJwp9LCB7CiAgaWQ6IDUsCiAgdHlwZTogJ3N1YnNjcmlwdCcsCiAgaWNvbjogJ3N1YnNjcmlwdCcKfSwgewogIGlkOiA2LAogIHR5cGU6ICdzdXBlcnNjcmlwdCcsCiAgaWNvbjogJ3N1cGVyc2NyaXB0Jwp9LCB7CiAgaWQ6IDcsCiAgdHlwZTogJ2Zvcm1hdEJsb2NrSDEnLAogIGljb246ICdmb3JtYXRCbG9ja0gxJwp9LCB7CiAgaWQ6IDgsCiAgdHlwZTogJ2Zvcm1hdEJsb2NrSDInLAogIGljb246ICdmb3JtYXRCbG9ja0gyJwp9LCB7CiAgaWQ6IDksCiAgdHlwZTogJ2luc2VydFVub3JkZXJlZExpc3QnLAogIGljb246ICdpbnNlcnRVbm9yZGVyZWRMaXN0Jwp9LCB7CiAgaWQ6IDEwLAogIHR5cGU6ICdpbnNlcnRPcmRlcmVkTGlzdCcsCiAgaWNvbjogJ2luc2VydE9yZGVyZWRMaXN0Jwp9LCB7CiAgaWQ6IDExLAogIHR5cGU6ICdmb3JtYXRCbG9ja3F1b3RlJywKICBpY29uOiAncXVvdGUnCn1dOwpleHBvcnQgdmFyIG1lZGlhQWN0aW9ucyA9IFt7CiAgaWQ6IDEsCiAgdHlwZTogJ2NyZWF0ZUxpbmsnLAogIGljb246ICdsaW5rLWljb24nCn0sIHsKICBpZDogMiwKICB0eXBlOiAndXBsb2FkSW1hZ2UnLAogIGljb246ICdpbWFnZS1pY29uJwp9XTsKCnZhciBjcmVhdGVMaW5rID0gZnVuY3Rpb24gY3JlYXRlTGluaygpIHsKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYWxlcnQKICByZXR1cm4gcHJvbXB0KCdFbnRlciB0aGUgVVJMJykgfHwgdW5kZWZpbmVkOwp9OwovKiogQFRPRE8gcmV2aXNlIHVzYWdlIG9mIGVkaXRvckNvbnRlbnQgKi8KCgp2YXIgdXBsb2FkSW1hZ2UgPSBmdW5jdGlvbiB1cGxvYWRJbWFnZShlZGl0b3JDb250ZW50LCBldmVudCwgY2FsbGJhY2spIHsKICB2YXIgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsKICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsCiAgLyojX19QVVJFX18qLwogIF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgdmFyIGZvcm1EYXRhLCBpbWcsIF9yZWYyLCBhY2Nlc3NVcmw7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBmb3JtRGF0YSA9IGNyZWF0ZUZvcm1EYXRhKGV2ZW50KTsKICAgICAgICAgICAgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gaW1hZ2VVcGxvYWQoZm9ybURhdGEpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgX3JlZjIgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBhY2Nlc3NVcmwgPSBfcmVmMi5hY2Nlc3NVcmw7CiAgICAgICAgICAgIGltZy5zcmMgPSBhY2Nlc3NVcmw7CiAgICAgICAgICAgIGNhbGxiYWNrKGltZyk7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKSwgZmFsc2UpOwoKICBpZiAoZmlsZSkgewogICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgfQp9OwoKZXhwb3J0IHZhciBnZXRRdWVyeUNvbW1hbmRTdGF0ZSA9IGZ1bmN0aW9uIGdldFF1ZXJ5Q29tbWFuZFN0YXRlKGFDb21tYW5kTmFtZSkgewogIHJldHVybiBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZShhQ29tbWFuZE5hbWUpOwp9OwpleHBvcnQgdmFyIGV4ZWNDb21tYW5kID0gZnVuY3Rpb24gZXhlY0NvbW1hbmQoYUNvbW1hbmROYW1lKSB7CiAgdmFyIGFTaG93RGVmYXVsdFVJID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICB2YXIgYVZhbHVlQXJndW1lbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICcnOwogIHZhciBlZGl0b3JDb250ZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBhcmd1bWVudHNbM10gOiB1bmRlZmluZWQ7CiAgdmFyIGV2ZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgPyBhcmd1bWVudHNbNF0gOiB1bmRlZmluZWQ7CiAgdmFyIGZvcm1hdEJsb2NrID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgPyBhcmd1bWVudHNbNV0gOiB1bmRlZmluZWQ7CiAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDYgPyBhcmd1bWVudHNbNl0gOiB1bmRlZmluZWQ7CgogIHN3aXRjaCAoYUNvbW1hbmROYW1lKSB7CiAgICBjYXNlICdjcmVhdGVMaW5rJzoKICAgICAgYVZhbHVlQXJndW1lbnQgPSBjcmVhdGVMaW5rKCk7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgYWN0aW9ucy51cGxvYWRJbWFnZToKICAgICAgdXBsb2FkSW1hZ2UoZWRpdG9yQ29udGVudCwgZXZlbnQsIGNhbGxiYWNrKTsKICAgICAgYnJlYWs7CiAgfQoKICBpZiAoYUNvbW1hbmROYW1lID09PSAnZm9ybWF0QmxvY2tIMScgfHwgYUNvbW1hbmROYW1lID09PSAnZm9ybWF0QmxvY2tIMicgfHwgYUNvbW1hbmROYW1lID09PSAnZm9ybWF0QmxvY2txdW90ZScpIHsKICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdmb3JtYXRCbG9jaycsIGFTaG93RGVmYXVsdFVJLCBmb3JtYXRCbG9jayk7CiAgfSBlbHNlIHsKICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKGFDb21tYW5kTmFtZSwgYVNob3dEZWZhdWx0VUksIGFWYWx1ZUFyZ3VtZW50KTsKICB9Cn07"},{"version":3,"sources":["F:/Projects/fanexus/src/services/rich-text-editor.service.js"],"names":["createFormData","imageUpload","actions","formatBlock","formatBlockH1","formatBlockH2","uploadImage","formatBlockquote","commands","id","type","icon","mediaActions","createLink","prompt","undefined","editorContent","event","callback","file","target","files","reader","FileReader","addEventListener","formData","img","document","createElement","accessUrl","src","readAsDataURL","getQueryCommandState","aCommandName","queryCommandState","execCommand","aShowDefaultUI","aValueArgument"],"mappings":";;AAAA,SAASA,cAAT,EAAyBC,WAAzB,QAA4C,0BAA5C;AAEA,OAAO,IAAMC,OAAO,GAAG;AACrBC,EAAAA,WAAW,EAAE,aADQ;AAErBC,EAAAA,aAAa,EAAE,eAFM;AAGrBC,EAAAA,aAAa,EAAE,eAHM;AAIrBC,EAAAA,WAAW,EAAE,aAJQ;AAKrBC,EAAAA,gBAAgB,EAAE;AALG,CAAhB;AAQP,OAAO,IAAMC,QAAQ,GAAG,CACtB;AAAEC,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,MAAf;AAAuBC,EAAAA,IAAI,EAAE;AAA7B,CADsB,EAEtB;AAAEF,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,QAAf;AAAyBC,EAAAA,IAAI,EAAE;AAA/B,CAFsB,EAGtB;AAAEF,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,WAAf;AAA4BC,EAAAA,IAAI,EAAE;AAAlC,CAHsB,EAItB;AAAEF,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,eAAf;AAAgCC,EAAAA,IAAI,EAAE;AAAtC,CAJsB,EAKtB;AAAEF,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,WAAf;AAA4BC,EAAAA,IAAI,EAAE;AAAlC,CALsB,EAMtB;AAAEF,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,aAAf;AAA8BC,EAAAA,IAAI,EAAE;AAApC,CANsB,EAOtB;AAAEF,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,eAAf;AAAgCC,EAAAA,IAAI,EAAE;AAAtC,CAPsB,EAQtB;AAAEF,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,eAAf;AAAgCC,EAAAA,IAAI,EAAE;AAAtC,CARsB,EAStB;AAAEF,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,qBAAf;AAAsCC,EAAAA,IAAI,EAAE;AAA5C,CATsB,EAUtB;AAAEF,EAAAA,EAAE,EAAE,EAAN;AAAUC,EAAAA,IAAI,EAAE,mBAAhB;AAAqCC,EAAAA,IAAI,EAAE;AAA3C,CAVsB,EAWtB;AAAEF,EAAAA,EAAE,EAAE,EAAN;AAAUC,EAAAA,IAAI,EAAE,kBAAhB;AAAoCC,EAAAA,IAAI,EAAE;AAA1C,CAXsB,CAAjB;AAaP,OAAO,IAAMC,YAAY,GAAG,CAC1B;AAAEH,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,YAAf;AAA6BC,EAAAA,IAAI,EAAE;AAAnC,CAD0B,EAE1B;AAAEF,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,aAAf;AAA8BC,EAAAA,IAAI,EAAE;AAApC,CAF0B,CAArB;;AAKP,IAAME,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB;AACA,SAAOC,MAAM,CAAC,eAAD,CAAN,IAA2BC,SAAlC;AACD,CAHD;AAIA;;;AACA,IAAMT,WAAW,GAAG,SAAdA,WAAc,CAACU,aAAD,EAAgBC,KAAhB,EAAuBC,QAAvB,EAAoC;AACtD,MAAMC,IAAI,GAAGF,KAAK,CAACG,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAb;AACA,MAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;AAEAD,EAAAA,MAAM,CAACE,gBAAP,CACE,MADF;AAAA;AAAA;AAAA;AAAA,0BAEE;AAAA;;AAAA;AAAA;AAAA;AAAA;AACQC,YAAAA,QADR,GACmBzB,cAAc,CAACiB,KAAD,CADjC;AAEQS,YAAAA,GAFR,GAEcC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAFd;AAAA;AAAA,mBAI8B3B,WAAW,CAACwB,QAAD,CAJzC;;AAAA;AAAA;AAIUI,YAAAA,SAJV,SAIUA,SAJV;AAKEH,YAAAA,GAAG,CAACI,GAAJ,GAAUD,SAAV;AAEAX,YAAAA,QAAQ,CAACQ,GAAD,CAAR;;AAPF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAFF,IAWE,KAXF;;AAcA,MAAIP,IAAJ,EAAU;AACRG,IAAAA,MAAM,CAACS,aAAP,CAAqBZ,IAArB;AACD;AACF,CArBD;;AAuBA,OAAO,IAAMa,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAAC,YAAY;AAAA,SAC9CN,QAAQ,CAACO,iBAAT,CAA2BD,YAA3B,CAD8C;AAAA,CAAzC;AAGP,OAAO,IAAME,WAAW,GAAG,SAAdA,WAAc,CACzBF,YADyB,EAQtB;AAAA,MANHG,cAMG,uEANc,KAMd;AAAA,MALHC,cAKG,uEALc,EAKd;AAAA,MAJHrB,aAIG;AAAA,MAHHC,KAGG;AAAA,MAFHd,WAEG;AAAA,MADHe,QACG;;AACH,UAAQe,YAAR;AACE,SAAK,YAAL;AACEI,MAAAA,cAAc,GAAGxB,UAAU,EAA3B;AACA;;AACF,SAAKX,OAAO,CAACI,WAAb;AACEA,MAAAA,WAAW,CAACU,aAAD,EAAgBC,KAAhB,EAAuBC,QAAvB,CAAX;AACA;AANJ;;AASA,MACEe,YAAY,KAAK,eAAjB,IACAA,YAAY,KAAK,eADjB,IAEAA,YAAY,KAAK,kBAHnB,EAIE;AACAN,IAAAA,QAAQ,CAACQ,WAAT,CAAqB,aAArB,EAAoCC,cAApC,EAAoDjC,WAApD;AACD,GAND,MAMO;AACLwB,IAAAA,QAAQ,CAACQ,WAAT,CAAqBF,YAArB,EAAmCG,cAAnC,EAAmDC,cAAnD;AACD;AACF,CA3BM","sourcesContent":["import { createFormData, imageUpload } from '@/services/image.service';\r\n\r\nexport const actions = {\r\n  formatBlock: 'formatBlock',\r\n  formatBlockH1: 'formatBlockH1',\r\n  formatBlockH2: 'formatBlockH2',\r\n  uploadImage: 'uploadImage',\r\n  formatBlockquote: 'formatBlockquote'\r\n};\r\n\r\nexport const commands = [\r\n  { id: 1, type: 'bold', icon: 'bold' },\r\n  { id: 2, type: 'italic', icon: 'italic' },\r\n  { id: 3, type: 'underline', icon: 'underline' },\r\n  { id: 4, type: 'strikeThrough', icon: 'strikeThrough' },\r\n  { id: 5, type: 'subscript', icon: 'subscript' },\r\n  { id: 6, type: 'superscript', icon: 'superscript' },\r\n  { id: 7, type: 'formatBlockH1', icon: 'formatBlockH1' },\r\n  { id: 8, type: 'formatBlockH2', icon: 'formatBlockH2' },\r\n  { id: 9, type: 'insertUnorderedList', icon: 'insertUnorderedList' },\r\n  { id: 10, type: 'insertOrderedList', icon: 'insertOrderedList' },\r\n  { id: 11, type: 'formatBlockquote', icon: 'quote' }\r\n];\r\nexport const mediaActions = [\r\n  { id: 1, type: 'createLink', icon: 'link-icon' },\r\n  { id: 2, type: 'uploadImage', icon: 'image-icon' }\r\n];\r\n\r\nconst createLink = () => {\r\n  // eslint-disable-next-line no-alert\r\n  return prompt('Enter the URL') || undefined;\r\n};\r\n/** @TODO revise usage of editorContent */\r\nconst uploadImage = (editorContent, event, callback) => {\r\n  const file = event.target.files[0];\r\n  const reader = new FileReader();\r\n\r\n  reader.addEventListener(\r\n    'load',\r\n    async function() {\r\n      const formData = createFormData(event);\r\n      const img = document.createElement('img');\r\n\r\n      const { accessUrl } = await imageUpload(formData);\r\n      img.src = accessUrl;\r\n\r\n      callback(img);\r\n    },\r\n    false\r\n  );\r\n\r\n  if (file) {\r\n    reader.readAsDataURL(file);\r\n  }\r\n};\r\n\r\nexport const getQueryCommandState = aCommandName =>\r\n  document.queryCommandState(aCommandName);\r\n\r\nexport const execCommand = (\r\n  aCommandName,\r\n  aShowDefaultUI = false,\r\n  aValueArgument = '',\r\n  editorContent,\r\n  event,\r\n  formatBlock,\r\n  callback\r\n) => {\r\n  switch (aCommandName) {\r\n    case 'createLink':\r\n      aValueArgument = createLink();\r\n      break;\r\n    case actions.uploadImage:\r\n      uploadImage(editorContent, event, callback);\r\n      break;\r\n  }\r\n\r\n  if (\r\n    aCommandName === 'formatBlockH1' ||\r\n    aCommandName === 'formatBlockH2' ||\r\n    aCommandName === 'formatBlockquote'\r\n  ) {\r\n    document.execCommand('formatBlock', aShowDefaultUI, formatBlock);\r\n  } else {\r\n    document.execCommand(aCommandName, aShowDefaultUI, aValueArgument);\r\n  }\r\n};\r\n"]}]}