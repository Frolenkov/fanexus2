{"remainingRequest":"I:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js!I:\\Projects\\fanexus\\node_modules\\eslint-loader\\index.js??ref--13-0!I:\\Projects\\fanexus\\src\\services\\api.service.js","dependencies":[{"path":"I:\\Projects\\fanexus\\src\\services\\api.service.js","mtime":1587102899848},{"path":"I:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkk6XFxQcm9qZWN0c1xcZmFuZXh1c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IFZ1ZUF4aW9zIGZyb20gJ3Z1ZS1heGlvcyc7CmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAnQC9zZXJ2aWNlcy9qd3Quc2VydmljZSc7CmltcG9ydCB7IEFQSV9VUkwgfSBmcm9tICdAL3NlcnZpY2VzL2NvbmZpZyc7CmV4cG9ydCB2YXIgYXBpSW5pdCA9IGZ1bmN0aW9uIGFwaUluaXQoKSB7CiAgVnVlLnVzZShWdWVBeGlvcywgYXhpb3MpOwogIFZ1ZS5heGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gQVBJX1VSTDsKICBzZXRBcGlIZWFkZXIoKTsKICBheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICBpZiAoZXJyb3IpIHsKICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgZXJyb3IpOwogICAgfQoKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgfSk7Cn07Ci8qQFRPRE8gcmVtb3ZlIHRoaXMgZnVuY3Rpb24gYXMgd2VsbCBhcyB0aGUgYWxsIG1vY2tzKi8KCmV4cG9ydCB2YXIgZ2V0TW9ja2VkID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShkYXRhKSB7CiAgICB2YXIgdGltZU91dCwKICAgICAgICBfYXJncyA9IGFyZ3VtZW50czsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgdGltZU91dCA9IF9hcmdzLmxlbmd0aCA+IDEgJiYgX2FyZ3NbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmdzWzFdIDogMTAwMDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShkYXRhKTsKICAgICAgICAgICAgICB9LCB0aW1lT3V0KTsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRNb2NrZWQoX3gpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwpleHBvcnQgdmFyIHNldEFwaUhlYWRlciA9IGZ1bmN0aW9uIHNldEFwaUhlYWRlcigpIHsKICByZXR1cm4gVnVlLmF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIuY29uY2F0KGdldFRva2VuKCkpOwp9OwpleHBvcnQgdmFyIGdldCA9IGZ1bmN0aW9uIGdldChyZXNvdXJjZSkgewogIHJldHVybiBheGlvcy5nZXQocmVzb3VyY2UpOwp9OwpleHBvcnQgdmFyIHBvc3QgPSBmdW5jdGlvbiBwb3N0KHJlc291cmNlLCBwYXlsb2FkKSB7CiAgcmV0dXJuIGF4aW9zLnBvc3QocmVzb3VyY2UsIHBheWxvYWQpOwp9OwpleHBvcnQgdmFyIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZShyZXNvdXJjZSkgewogIHJldHVybiBheGlvcy5kZWxldGUocmVzb3VyY2UpOwp9OwpleHBvcnQgZGVmYXVsdCB7CiAgYXBpSW5pdDogYXBpSW5pdCwKICBzZXRBcGlIZWFkZXI6IHNldEFwaUhlYWRlciwKICBnZXQ6IGdldCwKICBwb3N0OiBwb3N0LAogIHJlbW92ZTogcmVtb3ZlCn07"},{"version":3,"sources":["I:/Projects/fanexus/src/services/api.service.js"],"names":["Vue","axios","VueAxios","getToken","API_URL","apiInit","use","defaults","baseURL","setApiHeader","interceptors","response","data","error","console","log","Promise","reject","getMocked","timeOut","resolve","setTimeout","headers","common","get","resource","post","payload","remove","delete"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,SAASC,QAAT,QAAyB,wBAAzB;AACA,SAASC,OAAT,QAAwB,mBAAxB;AAEA,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AAC3BL,EAAAA,GAAG,CAACM,GAAJ,CAAQJ,QAAR,EAAkBD,KAAlB;AACAD,EAAAA,GAAG,CAACC,KAAJ,CAAUM,QAAV,CAAmBC,OAAnB,GAA6BJ,OAA7B;AACAK,EAAAA,YAAY;AACZR,EAAAA,KAAK,CAACS,YAAN,CAAmBC,QAAnB,CAA4BL,GAA5B,CACE,UAAAK,QAAQ;AAAA,WAAIA,QAAQ,CAACC,IAAb;AAAA,GADV,EAEE,UAAAC,KAAK,EAAI;AACP,QAAIA,KAAJ,EAAW;AACTC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,KAArB;AACD;;AACD,WAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,GAPH;AASD,CAbM;AAeP;;AACA,OAAO,IAAMK,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAG,iBAAON,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAaO,YAAAA,OAAb,2DAAuB,IAAvB;AAAA,6CAChB,IAAIH,OAAJ,CAAY,UAAAI,OAAO;AAAA,qBAAIC,UAAU,CAAC;AAAA,uBAAMD,OAAO,CAACR,IAAD,CAAb;AAAA,eAAD,EAAsBO,OAAtB,CAAd;AAAA,aAAnB,CADgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAATD,SAAS;AAAA;AAAA;AAAA,GAAf;AAGP,OAAO,IAAMT,YAAY,GAAG,SAAfA,YAAe;AAAA,SACzBT,GAAG,CAACC,KAAJ,CAAUM,QAAV,CAAmBe,OAAnB,CAA2BC,MAA3B,CAAkC,eAAlC,qBAA+DpB,QAAQ,EAAvE,CADyB;AAAA,CAArB;AAEP,OAAO,IAAMqB,GAAG,GAAG,SAANA,GAAM,CAAAC,QAAQ;AAAA,SAAIxB,KAAK,CAACuB,GAAN,CAAUC,QAAV,CAAJ;AAAA,CAApB;AACP,OAAO,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAACD,QAAD,EAAWE,OAAX;AAAA,SAAuB1B,KAAK,CAACyB,IAAN,CAAWD,QAAX,EAAqBE,OAArB,CAAvB;AAAA,CAAb;AACP,OAAO,IAAMC,MAAM,GAAG,SAATA,MAAS,CAAAH,QAAQ;AAAA,SAAIxB,KAAK,CAAC4B,MAAN,CAAaJ,QAAb,CAAJ;AAAA,CAAvB;AAEP,eAAe;AAAEpB,EAAAA,OAAO,EAAPA,OAAF;AAAWI,EAAAA,YAAY,EAAZA,YAAX;AAAyBe,EAAAA,GAAG,EAAHA,GAAzB;AAA8BE,EAAAA,IAAI,EAAJA,IAA9B;AAAoCE,EAAAA,MAAM,EAANA;AAApC,CAAf","sourcesContent":["import Vue from 'vue';\r\nimport axios from 'axios';\r\nimport VueAxios from 'vue-axios';\r\nimport { getToken } from '@/services/jwt.service';\r\nimport { API_URL } from '@/services/config';\r\n\r\nexport const apiInit = () => {\r\n  Vue.use(VueAxios, axios);\r\n  Vue.axios.defaults.baseURL = API_URL;\r\n  setApiHeader();\r\n  axios.interceptors.response.use(\r\n    response => response.data,\r\n    error => {\r\n      if (error) {\r\n        console.log('error', error);\r\n      }\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n};\r\n\r\n/*@TODO remove this function as well as the all mocks*/\r\nexport const getMocked = async (data, timeOut = 1000) => {\r\n  return new Promise(resolve => setTimeout(() => resolve(data), timeOut));\r\n};\r\nexport const setApiHeader = () =>\r\n  (Vue.axios.defaults.headers.common['Authorization'] = `Bearer ${getToken()}`);\r\nexport const get = resource => axios.get(resource);\r\nexport const post = (resource, payload) => axios.post(resource, payload);\r\nexport const remove = resource => axios.delete(resource);\r\n\r\nexport default { apiInit, setApiHeader, get, post, remove };\r\n"]}]}