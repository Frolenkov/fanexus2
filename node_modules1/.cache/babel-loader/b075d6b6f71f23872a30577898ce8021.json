{"remainingRequest":"F:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js!F:\\Projects\\fanexus\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\Projects\\fanexus\\src\\services\\rich-text-editor.service.js","dependencies":[{"path":"F:\\Projects\\fanexus\\src\\services\\rich-text-editor.service.js","mtime":1595221465089},{"path":"F:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRjpcXFByb2plY3RzXFxmYW5leHVzXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgY3JlYXRlRm9ybURhdGEsIGltYWdlVXBsb2FkIH0gZnJvbSAnQC9zZXJ2aWNlcy9pbWFnZS5zZXJ2aWNlJzsKLyoqIEBUT0RPIHJldmlzZSAqLwoKZXhwb3J0IHZhciBhY3Rpb25zID0gewogIGZvcm1hdEJsb2NrOiAnZm9ybWF0QmxvY2snLAogIGZvcm1hdEJsb2NrSDE6ICdmb3JtYXRCbG9ja0gxJywKICBmb3JtYXRCbG9ja0gyOiAnZm9ybWF0QmxvY2tIMicsCiAgdXBsb2FkSW1hZ2U6ICd1cGxvYWRJbWFnZScsCiAgZm9ybWF0QmxvY2txdW90ZTogJ2Zvcm1hdEJsb2NrcXVvdGUnCn07CmV4cG9ydCB2YXIgY29tbWFuZHMgPSBbewogIGlkOiAxLAogIHR5cGU6ICdib2xkJywKICBpY29uOiAnYm9sZCcKfSwgewogIGlkOiAyLAogIHR5cGU6ICdpdGFsaWMnLAogIGljb246ICdpdGFsaWMnCn0sIHsKICBpZDogMywKICB0eXBlOiAndW5kZXJsaW5lJywKICBpY29uOiAndW5kZXJsaW5lJwp9LCB7CiAgaWQ6IDQsCiAgdHlwZTogJ3N0cmlrZVRocm91Z2gnLAogIGljb246ICdzdHJpa2VUaHJvdWdoJwp9LCB7CiAgaWQ6IDUsCiAgdHlwZTogJ3N1YnNjcmlwdCcsCiAgaWNvbjogJ3N1YnNjcmlwdCcKfSwgewogIGlkOiA2LAogIHR5cGU6ICdzdXBlcnNjcmlwdCcsCiAgaWNvbjogJ3N1cGVyc2NyaXB0Jwp9LCB7CiAgaWQ6IDcsCiAgdHlwZTogJ2Zvcm1hdEJsb2NrSDEnLAogIGljb246ICdmb3JtYXRCbG9ja0gxJwp9LCB7CiAgaWQ6IDgsCiAgdHlwZTogJ2Zvcm1hdEJsb2NrSDInLAogIGljb246ICdmb3JtYXRCbG9ja0gyJwp9LCB7CiAgaWQ6IDksCiAgdHlwZTogJ2luc2VydFVub3JkZXJlZExpc3QnLAogIGljb246ICdpbnNlcnRVbm9yZGVyZWRMaXN0Jwp9LCB7CiAgaWQ6IDEwLAogIHR5cGU6ICdpbnNlcnRPcmRlcmVkTGlzdCcsCiAgaWNvbjogJ2luc2VydE9yZGVyZWRMaXN0Jwp9LCB7CiAgaWQ6IDExLAogIHR5cGU6ICdmb3JtYXRCbG9ja3F1b3RlJywKICBpY29uOiAncXVvdGUnCn1dOwpleHBvcnQgdmFyIG1lZGlhQWN0aW9ucyA9IFt7CiAgaWQ6IDEsCiAgdHlwZTogJ2NyZWF0ZUxpbmsnLAogIGljb246ICdsaW5rLWljb24nCn0sIHsKICBpZDogMiwKICB0eXBlOiAndXBsb2FkSW1hZ2UnLAogIGljb246ICdpbWFnZS1pY29uJwp9XTsKLyoqIEBUT0RPIHRlc3QgYW5kIGlmIGV2ZXJ5dGhpbmcncyBvaywgdGhlbiByZW1vdmUgdG9kbyAqLwoKdmFyIGNyZWF0ZUxpbmsgPSBmdW5jdGlvbiBjcmVhdGVMaW5rKCkgewogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hbGVydAogIHJldHVybiBwcm9tcHQoJ0VudGVyIHRoZSBVUkwnKSB8fCB1bmRlZmluZWQ7Cn07Ci8qKiBAVE9ETyByZXZpc2UgdXNhZ2Ugb2YgZWRpdG9yQ29udGVudCAqLwoKCnZhciB1cGxvYWRJbWFnZSA9IGZ1bmN0aW9uIHVwbG9hZEltYWdlKGVkaXRvckNvbnRlbnQsIGV2ZW50LCBjYWxsYmFjaykgewogIHZhciBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdOwogIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywKICAvKiNfX1BVUkVfXyovCiAgX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICB2YXIgZm9ybURhdGEsIGltZywgX3JlZjIsIGFjY2Vzc1VybDsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGZvcm1EYXRhID0gY3JlYXRlRm9ybURhdGEoZXZlbnQpOwogICAgICAgICAgICBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBpbWFnZVVwbG9hZChmb3JtRGF0YSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBfcmVmMiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGFjY2Vzc1VybCA9IF9yZWYyLmFjY2Vzc1VybDsKICAgICAgICAgICAgaW1nLnNyYyA9IGFjY2Vzc1VybDsKICAgICAgICAgICAgY2FsbGJhY2soaW1nKTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpLCBmYWxzZSk7CgogIGlmIChmaWxlKSB7CiAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKICB9Cn07CgpleHBvcnQgdmFyIGdldFF1ZXJ5Q29tbWFuZFN0YXRlID0gZnVuY3Rpb24gZ2V0UXVlcnlDb21tYW5kU3RhdGUoYUNvbW1hbmROYW1lKSB7CiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlKGFDb21tYW5kTmFtZSk7Cn07CmV4cG9ydCB2YXIgZXhlY0NvbW1hbmQgPSBmdW5jdGlvbiBleGVjQ29tbWFuZChhQ29tbWFuZE5hbWUpIHsKICB2YXIgYVNob3dEZWZhdWx0VUkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogIHZhciBhVmFsdWVBcmd1bWVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJyc7CiAgdmFyIGVkaXRvckNvbnRlbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDsKICB2YXIgZXZlbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gNCA/IGFyZ3VtZW50c1s0XSA6IHVuZGVmaW5lZDsKICB2YXIgZm9ybWF0QmxvY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gNSA/IGFyZ3VtZW50c1s1XSA6IHVuZGVmaW5lZDsKICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gNiA/IGFyZ3VtZW50c1s2XSA6IHVuZGVmaW5lZDsKCiAgLyoqIEBUT0RPIGNyZWF0ZSBhY3Rpb24gdHlwZXMgKi8KICBzd2l0Y2ggKGFDb21tYW5kTmFtZSkgewogICAgY2FzZSAnY3JlYXRlTGluayc6CiAgICAgIGFWYWx1ZUFyZ3VtZW50ID0gY3JlYXRlTGluaygpOwogICAgICBicmVhazsKCiAgICBjYXNlIGFjdGlvbnMudXBsb2FkSW1hZ2U6CiAgICAgIHVwbG9hZEltYWdlKGVkaXRvckNvbnRlbnQsIGV2ZW50LCBjYWxsYmFjayk7CiAgICAgIGJyZWFrOwogIH0KCiAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoYUNvbW1hbmROYW1lLCBhU2hvd0RlZmF1bHRVSSwgYVZhbHVlQXJndW1lbnQpOwogIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdmb3JtYXRCbG9jaycsIGFTaG93RGVmYXVsdFVJLCBmb3JtYXRCbG9jayk7Cn07"},{"version":3,"sources":["F:/Projects/fanexus/src/services/rich-text-editor.service.js"],"names":["createFormData","imageUpload","actions","formatBlock","formatBlockH1","formatBlockH2","uploadImage","formatBlockquote","commands","id","type","icon","mediaActions","createLink","prompt","undefined","editorContent","event","callback","file","target","files","reader","FileReader","addEventListener","formData","img","document","createElement","accessUrl","src","readAsDataURL","getQueryCommandState","aCommandName","queryCommandState","execCommand","aShowDefaultUI","aValueArgument"],"mappings":"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","sourcesContent":["import { createFormData, imageUpload } from '@/services/image.service';\r\n\r\n/** @TODO revise */\r\nexport const actions = {\r\n  formatBlock: 'formatBlock',\r\n  formatBlockH1: 'formatBlockH1',\r\n  formatBlockH2: 'formatBlockH2',\r\n  uploadImage: 'uploadImage',\r\n  formatBlockquote: 'formatBlockquote'\r\n};\r\n\r\nexport const commands = [\r\n  { id: 1, type: 'bold', icon: 'bold' },\r\n  { id: 2, type: 'italic', icon: 'italic' },\r\n  { id: 3, type: 'underline', icon: 'underline' },\r\n  { id: 4, type: 'strikeThrough', icon: 'strikeThrough' },\r\n  { id: 5, type: 'subscript', icon: 'subscript' },\r\n  { id: 6, type: 'superscript', icon: 'superscript' },\r\n  { id: 7, type: 'formatBlockH1', icon: 'formatBlockH1' },\r\n  { id: 8, type: 'formatBlockH2', icon: 'formatBlockH2' },\r\n  { id: 9, type: 'insertUnorderedList', icon: 'insertUnorderedList' },\r\n  { id: 10, type: 'insertOrderedList', icon: 'insertOrderedList' },\r\n  { id: 11, type: 'formatBlockquote', icon: 'quote' }\r\n];\r\nexport const mediaActions = [\r\n  { id: 1, type: 'createLink', icon: 'link-icon' },\r\n  { id: 2, type: 'uploadImage', icon: 'image-icon' }\r\n];\r\n\r\n/** @TODO test and if everything's ok, then remove todo */\r\nconst createLink = () => {\r\n  // eslint-disable-next-line no-alert\r\n  return prompt('Enter the URL') || undefined;\r\n};\r\n/** @TODO revise usage of editorContent */\r\nconst uploadImage = (editorContent, event, callback) => {\r\n  const file = event.target.files[0];\r\n  const reader = new FileReader();\r\n\r\n  reader.addEventListener(\r\n    'load',\r\n    async function() {\r\n      const formData = createFormData(event);\r\n      const img = document.createElement('img');\r\n\r\n      const { accessUrl } = await imageUpload(formData);\r\n      img.src = accessUrl;\r\n\r\n      callback(img);\r\n    },\r\n    false\r\n  );\r\n\r\n  if (file) {\r\n    reader.readAsDataURL(file);\r\n  }\r\n};\r\n\r\nexport const getQueryCommandState = aCommandName =>\r\n  document.queryCommandState(aCommandName);\r\n\r\nexport const execCommand = (\r\n  aCommandName,\r\n  aShowDefaultUI = false,\r\n  aValueArgument = '',\r\n  editorContent,\r\n  event,\r\n  formatBlock,\r\n  callback\r\n) => {\r\n  /** @TODO create action types */\r\n  switch (aCommandName) {\r\n    case 'createLink':\r\n      aValueArgument = createLink();\r\n      break;\r\n    case actions.uploadImage:\r\n      uploadImage(editorContent, event, callback);\r\n      break;\r\n  }\r\n\r\n  document.execCommand(aCommandName, aShowDefaultUI, aValueArgument);\r\n  document.execCommand('formatBlock', aShowDefaultUI, formatBlock);\r\n};\r\n"]}]}