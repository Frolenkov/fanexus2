{"remainingRequest":"I:\\Projects\\fanexus\\node_modules\\thread-loader\\dist\\cjs.js!I:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js!I:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!I:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!I:\\Projects\\fanexus\\src\\components\\Community\\CommunityRequests.vue?vue&type=script&lang=js&","dependencies":[{"path":"I:\\Projects\\fanexus\\src\\components\\Community\\CommunityRequests.vue","mtime":1589984391933},{"path":"I:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiSTpcXFByb2plY3RzXFxmYW5leHVzXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgY29tbXVuaXR5QXJlYXMsIGdldENvbW11bml0eVJlcXVlc3RzLCBkZWNsaW5lUmVxdWVzdCwgYWNjZXB0UmVxdWVzdCB9IGZyb20gJ0Avc2VydmljZXMvY29tbXVuaXR5LnNlcnZpY2UnOwppbXBvcnQgUmVxdWVzdCBmcm9tICdAL2NvbXBvbmVudHMvQmxvZy9SZXF1ZXN0JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6IGNvbW11bml0eUFyZWFzLnJlcXVlc3RzLAogIGNvbXBvbmVudHM6IHsKICAgIFJlcXVlc3Q6IFJlcXVlc3QKICB9LAogIHByb3BzOiB7CiAgICBjb21tdW5pdHlJZDogewogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogICAgZGF0YTogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZXF1ZXN0c0RhdGE6IG51bGwsCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBhbGlhc0lkOiAxLAogICAgICAvLyBAVE9ETyBnZXQgaXQgZnJvbSB0aGUgc3RvcmUKICAgICAgY29tbXVuaXR5UmVxdWVzdERhdGE6IHsKICAgICAgICBhbGlhczogMSwKICAgICAgICAvLyBAVE9ETyBhbmQgdXNlIGl0IGhlcmUKICAgICAgICByZXF1ZXN0SWQ6IG51bGwKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldERhdGE6IGZ1bmN0aW9uIGdldERhdGEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldENvbW11bml0eVJlcXVlc3RzKF90aGlzLmNvbW11bml0eUlkLCBfdGhpcy5jdXJyZW50UGFnZSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF90aGlzLnJlcXVlc3RzRGF0YSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNjsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgNl1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgaGFuZGxlVXNlclJlcXVlc3Q6IGZ1bmN0aW9uIGhhbmRsZVVzZXJSZXF1ZXN0KG1lbWJlcklkLCBpc0FjY2VwdCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcGF5bG9hZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMyLmNvbW11bml0eVJlcXVlc3REYXRhLnJlcXVlc3RJZCA9IG1lbWJlcklkOwogICAgICAgICAgICAgICAgcGF5bG9hZCA9IFtfdGhpczIuY29tbXVuaXR5SWQsIF90aGlzMi5yZXF1ZXN0RGF0YV07CgogICAgICAgICAgICAgICAgaWYgKCFpc0FjY2VwdCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDM7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gYWNjZXB0UmVxdWVzdC5hcHBseSh2b2lkIDAsIHBheWxvYWQpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmdldERhdGEoKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEzOwogICAgICAgICAgICAgICAgX3RoaXMyLmNvbW11bml0eVJlcXVlc3REYXRhLnJlcXVlc3RJZCA9IG51bGw7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmZpbmlzaCgxMyk7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDMxOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE4OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIHJldHVybiBkZWNsaW5lUmVxdWVzdC5hcHBseSh2b2lkIDAsIHBheWxvYWQpOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZ2V0RGF0YSgpOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAyNTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MSA9IF9jb250ZXh0MlsiY2F0Y2giXSgxOCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAyODsKICAgICAgICAgICAgICAgIF90aGlzMi5jb21tdW5pdHlSZXF1ZXN0RGF0YS5yZXF1ZXN0SWQgPSBudWxsOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5maW5pc2goMjgpOwoKICAgICAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzMsIDEwLCAxMywgMTZdLCBbMTgsIDI1LCAyOCwgMzFdXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmdldERhdGEoKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"sources":["CommunityRequests.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAqBA,SACA,cADA,EAEA,oBAFA,EAGA,cAHA,EAIA,aAJA,QAKA,8BALA;AAMA,OAAA,OAAA,MAAA,2BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cAAA,CAAA,QADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA;AADA,GAFA;AAKA,EAAA,KAAA,EAAA;AACA,IAAA,WAAA,EAAA;AACA,MAAA,QAAA,EAAA,IADA;AAEA,MAAA,IAAA,EAAA;AAFA,KADA;AAKA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AALA,GALA;AAcA,EAAA,IAdA,kBAcA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,IADA;AAEA,MAAA,WAAA,EAAA,CAFA;AAGA,MAAA,OAAA,EAAA,CAHA;AAGA;AACA,MAAA,oBAAA,EAAA;AACA,QAAA,KAAA,EAAA,CADA;AACA;AACA,QAAA,SAAA,EAAA;AAFA;AAJA,KAAA;AASA,GAxBA;AAyBA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,oBAAA,CACA,KAAA,CAAA,WADA,EAEA,KAAA,CAAA,WAFA,CAFA;;AAAA;AAEA,gBAAA,KAAA,CAAA,YAFA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,iDAOA,KAPA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA,KAVA;AAWA,IAAA,iBAXA,6BAWA,QAXA,EAWA,QAXA,EAWA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,MAAA,CAAA,oBAAA,CAAA,SAAA,GAAA,QAAA;AACA,gBAAA,OAFA,GAEA,CAAA,MAAA,CAAA,WAAA,EAAA,MAAA,CAAA,WAAA,CAFA;;AAAA,qBAGA,QAHA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,uBAKA,aAAA,MAAA,SAAA,OAAA,CALA;;AAAA;AAAA;AAAA,uBAMA,MAAA,CAAA,OAAA,EANA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,kDAQA,KARA;;AAAA;AAAA;AAUA,gBAAA,MAAA,CAAA,oBAAA,CAAA,SAAA,GAAA,IAAA;AAVA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,uBAcA,cAAA,MAAA,SAAA,OAAA,CAdA;;AAAA;AAAA;AAAA,uBAeA,MAAA,CAAA,OAAA,EAfA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,kDAiBA,KAjBA;;AAAA;AAAA;AAmBA,gBAAA,MAAA,CAAA,oBAAA,CAAA,SAAA,GAAA,IAAA;AAnBA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBA;AAjCA,GAzBA;AA4DA,EAAA,OA5DA,qBA4DA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACA,MAAA,CAAA,OAAA,EADA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AA9DA,CAAA","sourcesContent":["<template>\r\n  <div v-if=\"requestsData\" class=\"followers-requests\">\r\n    <request\r\n      :showButtons=\"true\"\r\n      :name=\"name\"\r\n      activityName=\"subscribed to your community:\"\r\n      :activityText=\"'@' + data.link\"\r\n      :date=\"dateRequested\"\r\n      v-for=\"{\r\n        alias: { id, image, name },\r\n        dateRequested\r\n      } in requestsData.membershipRequests\"\r\n      :key=\"id\"\r\n      :image=\"image\"\r\n      @decline=\"() => handleUserRequest(id)\"\r\n      @accept=\"() => handleUserRequest(id, true)\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  communityAreas,\r\n  getCommunityRequests,\r\n  declineRequest,\r\n  acceptRequest\r\n} from '@/services/community.service';\r\nimport Request from '@/components/Blog/Request';\r\n\r\nexport default {\r\n  name: communityAreas.requests,\r\n  components: {\r\n    Request\r\n  },\r\n  props: {\r\n    communityId: {\r\n      required: true,\r\n      type: String\r\n    },\r\n    data: {\r\n      type: Object\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      requestsData: null,\r\n      currentPage: 1,\r\n      aliasId: 1, // @TODO get it from the store\r\n      communityRequestData: {\r\n        alias: 1, // @TODO and use it here\r\n        requestId: null\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    async getData() {\r\n      try {\r\n        this.requestsData = await getCommunityRequests(\r\n          this.communityId,\r\n          this.currentPage\r\n        );\r\n      } catch (e) {\r\n        return false;\r\n      }\r\n    },\r\n    async handleUserRequest(memberId, isAccept) {\r\n      this.communityRequestData.requestId = memberId;\r\n      const payload = [this.communityId, this.requestData];\r\n      if (isAccept) {\r\n        try {\r\n          await acceptRequest(...payload);\r\n          await this.getData();\r\n        } catch (e) {\r\n          return false;\r\n        } finally {\r\n          this.communityRequestData.requestId = null;\r\n        }\r\n      } else {\r\n        try {\r\n          await declineRequest(...payload);\r\n          await this.getData();\r\n        } catch (e) {\r\n          return false;\r\n        } finally {\r\n          this.communityRequestData.requestId = null;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.getData();\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.followers-requests {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr 1fr;\r\n  grid-gap: var(--element-margin-m);\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/Community"}]}