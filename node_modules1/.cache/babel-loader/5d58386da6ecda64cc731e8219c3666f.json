{"remainingRequest":"F:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js!F:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Projects\\fanexus\\src\\components\\Community\\CommunityEditModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Projects\\fanexus\\src\\components\\Community\\CommunityEditModal.vue","mtime":1598010030132},{"path":"F:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubGluayI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJGOlxcUHJvamVjdHNcXGZhbmV4dXNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkY6XFxQcm9qZWN0c1xcZmFuZXh1c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgZmVlZFR5cGVzIH0gZnJvbSAnQC9zZXJ2aWNlcy9mZWVkLnNlcnZpY2UnOwppbXBvcnQgZ2V0Q29tcG9uZW50c0J5UHJlZml4IGZyb20gJ0AvdXRpbHMvZ2V0Q29tcG9uZW50c0J5UHJlZml4JzsKaW1wb3J0IFdhbGxwYXBlciBmcm9tICd+Y29tbW9uL1dhbGxwYXBlcic7CmltcG9ydCBNb2RhbCBmcm9tICd+Y29tbW9uL01vZGFsJzsKaW1wb3J0IEFkZEltYWdlIGZyb20gJy4uL2NvbW1vbi9BZGRJbWFnZSc7CmltcG9ydCBUYWJzIGZyb20gJ35jb21tb24vVGFicyc7CmltcG9ydCB0YWJzTWl4aW4gZnJvbSAnQC9taXhpbnMvdGFicy5taXhpbic7CmltcG9ydCB2YWxpZGF0aW9uTWl4aW4gZnJvbSAnQC9taXhpbnMvdmFsaWRhdGlvbi5taXhpbic7CmltcG9ydCB7IGdldENvbW11bml0eSwgZWRpdENvbW11bml0eSwgYmxvZ0ltYWdlVHlwZXMsIGNvbW11bml0eVJvb3QsIGNvbW11bml0eUVkaXRBcmVhcyB9IGZyb20gJ0Avc2VydmljZXMvQ29tbXVuaXR5L2NvbW11bml0eS5zZXJ2aWNlJzsKaW1wb3J0IENvbW11bml0eVByb2ZpbGUgZnJvbSAnQC9jb21wb25lbnRzL0NvbW11bml0eS9Db21tdW5pdHlQcm9maWxlJzsKaW1wb3J0IENvbW11bml0eVNldHRpbmdzIGZyb20gJ0AvY29tcG9uZW50cy9Db21tdW5pdHkvQ29tbXVuaXR5U2V0dGluZ3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQWRkSW1hZ2U6IEFkZEltYWdlLAogICAgV2FsbHBhcGVyOiBXYWxscGFwZXIsCiAgICBNb2RhbDogTW9kYWwsCiAgICBUYWJzOiBUYWJzLAogICAgQ29tbXVuaXR5UHJvZmlsZTogQ29tbXVuaXR5UHJvZmlsZSwKICAgIENvbW11bml0eVNldHRpbmdzOiBDb21tdW5pdHlTZXR0aW5ncwogIH0sCiAgcHJvcHM6IHsKICAgIGlkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBzZXR0aW5nczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBtaXhpbnM6IFt0YWJzTWl4aW4sIHZhbGlkYXRpb25NaXhpbl0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJsb2dJbWFnZVR5cGVzOiBibG9nSW1hZ2VUeXBlcywKICAgICAgYWN0aXZlVGFiOiAwLAogICAgICBjdXJyZW50Q29tcG9uZW50OiAnY29tbXVuaXR5LXByb2ZpbGUnLAogICAgICBuYXZUYWJzOiBbewogICAgICAgIHRpdGxlOiAnUHJvZmlsZScsCiAgICAgICAgY29tcG9uZW50OiBjb21tdW5pdHlFZGl0QXJlYXMucHJvZmlsZQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICdTZXR0aW5ncycsCiAgICAgICAgY29tcG9uZW50OiBjb21tdW5pdHlFZGl0QXJlYXMuc2V0dGluZ3MKICAgICAgfV0sCiAgICAgIGRhdGE6IG51bGwsCiAgICAgIGVycm9yczogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7CiAgICBjb3ZlckltYWdlRGF0YTogZnVuY3Rpb24gY292ZXJJbWFnZURhdGEoKSB7CiAgICAgIGlmICghdGhpcy5kYXRhIHx8ICF0aGlzLmRhdGEuY292ZXJJbWFnZSkgcmV0dXJuICcnOwogICAgICByZXR1cm4gdGhpcy5kYXRhLmNvdmVySW1hZ2UuYWNjZXNzVXJsIHx8IHRoaXMuZGF0YS5jb3ZlckltYWdlLnNyYzsKICAgIH0sCiAgICBjb21tdW5pdHlFZGl0Q29tcG9uZW50czogZnVuY3Rpb24gY29tbXVuaXR5RWRpdENvbXBvbmVudHMoKSB7CiAgICAgIHJldHVybiBnZXRDb21wb25lbnRzQnlQcmVmaXguY2FsbCh0aGlzLCBjb21tdW5pdHlSb290KTsKICAgIH0KICB9LCBtYXBTdGF0ZSh7CiAgICBhY3RpdmVBbGlhc0lkOiBmdW5jdGlvbiBhY3RpdmVBbGlhc0lkKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5hbGlhcy5hY3RpdmVBbGlhc0lkOwogICAgfQogIH0pKSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKHsKICAgIHNldENvbXBvbmVudDogZnVuY3Rpb24gc2V0Q29tcG9uZW50KCkgewogICAgICB2YXIgdGFiSW5kZXggPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDA7CiAgICAgIHZhciBjb21wb25lbnRJbmRleCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDsKICAgICAgdGhpcy5oYW5kbGVTZXRBY3RpdmVUYWIodGFiSW5kZXgpOwogICAgICB0aGlzLmN1cnJlbnRDb21wb25lbnQgPSBbJ2NvbW11bml0eS1wcm9maWxlJywgJ2NvbW11bml0eS1zZXR0aW5ncyddW2NvbXBvbmVudEluZGV4XTsKICAgIH0sCiAgICBoYW5kbGVBZGRJbWFnZTogZnVuY3Rpb24gaGFuZGxlQWRkSW1hZ2UoX3JlZikgewogICAgICB2YXIgdHlwZSA9IF9yZWYudHlwZSwKICAgICAgICAgIGRhdGEgPSBfcmVmLmRhdGE7CiAgICAgIHRoaXMuZGF0YVt0eXBlXSA9IGRhdGE7CiAgICB9LAogICAgaGFuZGxlU2F2ZTogZnVuY3Rpb24gaGFuZGxlU2F2ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfdGhpcyRkYXRhLCBuYW1lLCBsaW5rLCBsaW5rcywgZGVzY3JpcHRpb24sIGNvdmVySW1hZ2UsIGNvbnRlbnRBY2Nlc3NDb250cm9sLCBmb2xsb3dzQWNjZXNzQ29udHJvbCwgY29tbWVudHNBY2Nlc3NDb250cm9sLCBwb3N0aW5nQWNjZXNzQ29udHJvbCwgbWVtYmVyc0FjY2Vzc0NvbnRyb2wsIHJlYWN0aW9uc0FjY2Vzc0NvbnRyb2wsIHBheWxvYWQ7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIC8qKiBAVE9ETyByZXZpc2UgKi8KICAgICAgICAgICAgICAgIF90aGlzJGRhdGEgPSBfdGhpcy5kYXRhLCBuYW1lID0gX3RoaXMkZGF0YS5uYW1lLCBsaW5rID0gX3RoaXMkZGF0YS5saW5rLCBsaW5rcyA9IF90aGlzJGRhdGEubGlua3MsIGRlc2NyaXB0aW9uID0gX3RoaXMkZGF0YS5kZXNjcmlwdGlvbiwgY292ZXJJbWFnZSA9IF90aGlzJGRhdGEuY292ZXJJbWFnZSwgY29udGVudEFjY2Vzc0NvbnRyb2wgPSBfdGhpcyRkYXRhLmNvbnRlbnRBY2Nlc3NDb250cm9sLCBmb2xsb3dzQWNjZXNzQ29udHJvbCA9IF90aGlzJGRhdGEuZm9sbG93c0FjY2Vzc0NvbnRyb2wsIGNvbW1lbnRzQWNjZXNzQ29udHJvbCA9IF90aGlzJGRhdGEuY29tbWVudHNBY2Nlc3NDb250cm9sLCBwb3N0aW5nQWNjZXNzQ29udHJvbCA9IF90aGlzJGRhdGEucG9zdGluZ0FjY2Vzc0NvbnRyb2wsIG1lbWJlcnNBY2Nlc3NDb250cm9sID0gX3RoaXMkZGF0YS5tZW1iZXJzQWNjZXNzQ29udHJvbCwgcmVhY3Rpb25zQWNjZXNzQ29udHJvbCA9IF90aGlzJGRhdGEucmVhY3Rpb25zQWNjZXNzQ29udHJvbDsKICAgICAgICAgICAgICAgIHBheWxvYWQgPSB7CiAgICAgICAgICAgICAgICAgIGFsaWFzOiBfdGhpcy5hY3RpdmVBbGlhc0lkLAogICAgICAgICAgICAgICAgICBjb250ZW50QWNjZXNzQ29udHJvbDogY29udGVudEFjY2Vzc0NvbnRyb2wsCiAgICAgICAgICAgICAgICAgIGZvbGxvd3NBY2Nlc3NDb250cm9sOiBmb2xsb3dzQWNjZXNzQ29udHJvbCwKICAgICAgICAgICAgICAgICAgcG9zdGluZ0FjY2Vzc0NvbnRyb2w6IHBvc3RpbmdBY2Nlc3NDb250cm9sLAogICAgICAgICAgICAgICAgICBjb21tZW50c0FjY2Vzc0NvbnRyb2w6IGNvbW1lbnRzQWNjZXNzQ29udHJvbCwKICAgICAgICAgICAgICAgICAgbWVtYmVyc0FjY2Vzc0NvbnRyb2w6IG1lbWJlcnNBY2Nlc3NDb250cm9sLAogICAgICAgICAgICAgICAgICByZWFjdGlvbnNBY2Nlc3NDb250cm9sOiByZWFjdGlvbnNBY2Nlc3NDb250cm9sLAogICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICAgICAgICBsaW5rOiBsaW5rLAogICAgICAgICAgICAgICAgICBsaW5rczogbGlua3MsCiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgcnVsZXM6IF90aGlzLmRhdGEuY29tbXVuaXR5UnVsZXMubWFwKGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gX3JlZjIubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBfcmVmMi5kZXNjcmlwdGlvbjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICB0YWdOYW1lczogX3RoaXMuZGF0YS5UYWdzLm1hcChmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IF9yZWYzLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWU7CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgLyoqIEBUT0RPIG1ha2UgaXQgY29tbW9uIGJldHdlZW4gYmxvZyBhbmQgY29tbXVuaXR5ICovCgogICAgICAgICAgICAgICAgcGF5bG9hZC5ydWxlcyA9IHBheWxvYWQucnVsZXMuZmlsdGVyKGZ1bmN0aW9uIChydWxlcykgewogICAgICAgICAgICAgICAgICByZXR1cm4gcnVsZXMubmFtZS5sZW5ndGggfHwgcnVsZXMuZGVzY3JpcHRpb24ubGVuZ3RoOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBwYXlsb2FkLmxpbmtzID0gcGF5bG9hZC5saW5rcy5maWx0ZXIoZnVuY3Rpb24gKGxpbmspIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpbmsubGVuZ3RoOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvKiogQFRPRE8gbWFrZSBpdCBjb21tb24gYmV0d2VlbiBibG9nIGFuZCBjb21tdW5pdHkgKi8KCiAgICAgICAgICAgICAgICBpZiAoY292ZXJJbWFnZSAmJiBjb3ZlckltYWdlLmFjY2Vzc1VybCkgewogICAgICAgICAgICAgICAgICBwYXlsb2FkLmNvdmVySW1hZ2UgPSBjb3ZlckltYWdlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA1OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gZWRpdENvbW11bml0eShfdGhpcy5kYXRhLmlkLCBwYXlsb2FkKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX3RoaXMuZ2V0RmVlZERhdGEoewogICAgICAgICAgICAgICAgICBpZDogbGluayB8fCBfdGhpcy5kYXRhLmlkLAogICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiAxLAogICAgICAgICAgICAgICAgICB0eXBlOiBmZWVkVHlwZXMuY29tbXVuaXR5CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiAnY29tbXVuaXR5JywKICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGxpbmsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDUpOwogICAgICAgICAgICAgICAgX3RoaXMuZXJyb3JzID0gX2NvbnRleHQudDAucmVzcG9uc2UuZGF0YS5lcnJvcnM7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzUsIDEyXV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9LCBtYXBBY3Rpb25zKFsnZ2V0RmVlZERhdGEnXSkpLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgcmVzdWx0LCB7CiAgICAgICAgICAgICAgICAgIHJ1bGVzOiByZXN1bHQuY29tbXVuaXR5UnVsZXMubWFwKGZ1bmN0aW9uIChfcmVmNCkgewogICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gX3JlZjQubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBfcmVmNC5kZXNjcmlwdGlvbjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGdldENvbW11bml0eSh7CiAgICAgICAgICAgICAgICBpZDogX3RoaXMyLmlkLAogICAgICAgICAgICAgICAgcGFnaW5hdGlvbjogMQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0Mi50MSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIF90aGlzMi5kYXRhID0gKDAsIF9jb250ZXh0Mi50MCkoX2NvbnRleHQyLnQxKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"sources":["CommunityEditModal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"edit-community\" v-if=\"data\">\r\n    <modal\r\n      class=\"edit-community-modal modal-overlay--centered\"\r\n      :settings=\"settings\"\r\n      @save=\"handleSave\"\r\n      :closeOnSave=\"false\"\r\n    >\r\n      <template slot=\"body\">\r\n        <add-image\r\n          :type=\"blogImageTypes.coverImage\"\r\n          class=\"edit-community__add-bg\"\r\n          button-text=\"Add Background\"\r\n          @add=\"handleAddImage\"\r\n        >\r\n          <wallpaper :src=\"coverImageData\" />\r\n        </add-image>\r\n        <tabs\r\n          :tabs=\"navTabs\"\r\n          @selectTab=\"$active => setComponent($active, $active)\"\r\n          :active=\"activeTab\"\r\n        />\r\n        <component\r\n          :is=\"currentComponent\"\r\n          v-model=\"data\"\r\n          :errors=\"errors\"\r\n          @clear-error=\"clearError\"\r\n        />\r\n      </template>\r\n    </modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from 'vuex';\r\nimport { feedTypes } from '@/services/feed.service';\r\nimport getComponentsByPrefix from '@/utils/getComponentsByPrefix';\r\nimport Wallpaper from '~common/Wallpaper';\r\nimport Modal from '~common/Modal';\r\nimport AddImage from '../common/AddImage';\r\nimport Tabs from '~common/Tabs';\r\nimport tabsMixin from '@/mixins/tabs.mixin';\r\nimport validationMixin from '@/mixins/validation.mixin';\r\nimport {\r\n  getCommunity,\r\n  editCommunity,\r\n  blogImageTypes,\r\n  communityRoot,\r\n  communityEditAreas\r\n} from '@/services/Community/community.service';\r\nimport CommunityProfile from '@/components/Community/CommunityProfile';\r\nimport CommunitySettings from '@/components/Community/CommunitySettings';\r\n\r\nexport default {\r\n  components: {\r\n    AddImage,\r\n    Wallpaper,\r\n    Modal,\r\n    Tabs,\r\n    CommunityProfile,\r\n    CommunitySettings\r\n  },\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    settings: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  mixins: [tabsMixin, validationMixin],\r\n  data() {\r\n    return {\r\n      blogImageTypes,\r\n      activeTab: 0,\r\n      currentComponent: 'community-profile',\r\n      navTabs: [\r\n        {\r\n          title: 'Profile',\r\n          component: communityEditAreas.profile\r\n        },\r\n        {\r\n          title: 'Settings',\r\n          component: communityEditAreas.settings\r\n        }\r\n      ],\r\n      data: null,\r\n      errors: []\r\n    };\r\n  },\r\n  computed: {\r\n    coverImageData() {\r\n      if (!this.data || !this.data.coverImage) return '';\r\n\r\n      return this.data.coverImage.accessUrl || this.data.coverImage.src;\r\n    },\r\n    communityEditComponents() {\r\n      return getComponentsByPrefix.call(this, communityRoot);\r\n    },\r\n    ...mapState({\r\n      activeAliasId: state => state.alias.activeAliasId\r\n    })\r\n  },\r\n  methods: {\r\n    setComponent(tabIndex = 0, componentIndex = 0) {\r\n      this.handleSetActiveTab(tabIndex);\r\n      this.currentComponent = ['community-profile', 'community-settings'][\r\n        componentIndex\r\n      ];\r\n    },\r\n    handleAddImage({ type, data }) {\r\n      this.data[type] = data;\r\n    },\r\n\r\n    async handleSave() {\r\n      /** @TODO revise */\r\n      const {\r\n        name,\r\n        link,\r\n        links,\r\n        description,\r\n        coverImage,\r\n        contentAccessControl,\r\n        followsAccessControl,\r\n        commentsAccessControl,\r\n        postingAccessControl,\r\n        membersAccessControl,\r\n        reactionsAccessControl\r\n      } = this.data;\r\n      const payload = {\r\n        alias: this.activeAliasId,\r\n        contentAccessControl,\r\n        followsAccessControl,\r\n        postingAccessControl,\r\n        commentsAccessControl,\r\n        membersAccessControl,\r\n        reactionsAccessControl,\r\n        name,\r\n        link,\r\n        links,\r\n        description,\r\n        rules: this.data.communityRules.map(({ name, description }) => ({\r\n          name,\r\n          description\r\n        })),\r\n        tagNames: this.data.Tags.map(({ name }) => name)\r\n      };\r\n      /** @TODO make it common between blog and community */\r\n      payload.rules = payload.rules.filter(\r\n        rules => rules.name.length || rules.description.length\r\n      );\r\n      payload.links = payload.links.filter(link => link.length);\r\n\r\n      /** @TODO make it common between blog and community */\r\n      if (coverImage && coverImage.accessUrl) {\r\n        payload.coverImage = coverImage;\r\n      }\r\n\r\n      try {\r\n        await editCommunity(this.data.id, payload);\r\n        this.getFeedData({\r\n          id: link || this.data.id,\r\n          pagination: 1,\r\n          type: feedTypes.community\r\n        });\r\n        this.$router.push({\r\n          name: 'community',\r\n          params: {\r\n            id: link\r\n          }\r\n        });\r\n      } catch (e) {\r\n        this.errors = e.response.data.errors;\r\n      }\r\n    },\r\n    ...mapActions(['getFeedData'])\r\n  },\r\n  async mounted() {\r\n    this.data = (result => ({\r\n      ...result,\r\n      rules: result.communityRules.map(({ name, description }) => ({\r\n        name,\r\n        description\r\n      }))\r\n    }))(\r\n      await getCommunity({\r\n        id: this.id,\r\n        pagination: 1\r\n      })\r\n    );\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.edit-community {\r\n  grid-area: content;\r\n  overflow: auto;\r\n  background-color: var(--BG-primary);\r\n  &__add-bg {\r\n    ::v-deep .button {\r\n      padding: 8px var(--element-padding-xxl);\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/Community"}]}