{"remainingRequest":"F:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js!F:\\Projects\\fanexus\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\Projects\\fanexus\\src\\store\\modules\\auth.module.js","dependencies":[{"path":"F:\\Projects\\fanexus\\src\\store\\modules\\auth.module.js","mtime":1598358809773},{"path":"F:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\Projects\\fanexus\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJGOlxcUHJvamVjdHNcXGZhbmV4dXNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRjpcXFByb2plY3RzXFxmYW5leHVzXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgc2V0QXBpSGVhZGVyIH0gZnJvbSAnfmFwaSc7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgbG9nb3V0IGFzIF9sb2dvdXQsIGxvZ291dEFsbCBhcyBfbG9nb3V0QWxsLCBjcmVhdGVVc2VyIGFzIF9jcmVhdGVVc2VyLCB1cGRhdGVVc2VyIGFzIF91cGRhdGVVc2VyLCBnZXRDdXJyZW50VXNlciBhcyBfZ2V0Q3VycmVudFVzZXIgfSBmcm9tICdAL3NlcnZpY2VzL2F1dGguc2VydmljZSc7CmltcG9ydCB7IGhhc1Rva2VuLCBzYXZlVG9rZW4sIGRlc3Ryb3lUb2tlbiB9IGZyb20gJ0Avc2VydmljZXMvand0LnNlcnZpY2UnOwovKkBUT0RPIHJldmlzZSBpdCwgcG9zc2libHkgZ2V0IHRoZSB1c2VyIGRhdGEgZnJvbSB0aGUgZ2V0Q3VycmVudFVzZXIqLwoKaW1wb3J0IHsgZ2V0VXNlckRhdGEsIHNldFVzZXJEYXRhLCByZW1vdmVVc2VyRGF0YSB9IGZyb20gJ0Avc2VydmljZXMvc3RvcmFnZS5zZXJ2aWNlJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlci9pbmRleCc7CnZhciBzdGF0ZSA9IHsKICB1c2VyRGF0YTogZ2V0VXNlckRhdGEoKSwKICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlCn07CnZhciBhY3Rpb25zID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCBwYXlsb2FkKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgcmVzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIF9sb2dpbihwYXlsb2FkKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGNvbW1pdCgnbG9naW4nLCByZXMpOwogICAgICAgICAgICAgIGNvbW1pdCgndXBkYXRlQXV0aCcsIHJlcyAmJiByZXMudXNlckRhdGEpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gODsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgOF1dKTsKICAgIH0pKSgpOwogIH0sCiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMi5kaXNwYXRjaDsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMDsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIF9sb2dvdXQoKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjb21taXQoJ2xvZ291dCcpOwogICAgICAgICAgICAgIGNvbW1pdCgndXBkYXRlQXV0aCcpOwogICAgICAgICAgICAgIGNvbW1pdCgnc2V0TG9nZ2VkSW4nLCBmYWxzZSk7CiAgICAgICAgICAgICAgZGlzcGF0Y2goJ3NldEFjdGl2ZUFsaWFzJywgMCwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBpZiAocm91dGVyLmN1cnJlbnRSb3V0ZS5tZXRhLmF1dGhlbnRpY2F0aW9uKSB7CiAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICdob21lJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEzOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEwOwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzAsIDEwXV0pOwogICAgfSkpKCk7CiAgfSwKICBsb2dvdXRBbGw6IGZ1bmN0aW9uIGxvZ291dEFsbChfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMDsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIF9sb2dvdXRBbGwoKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjb21taXQoJ2xvZ291dEFsbCcpOwogICAgICAgICAgICAgIGNvbW1pdCgndXBkYXRlQXV0aCcpOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA3OwogICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgwKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzAsIDddXSk7CiAgICB9KSkoKTsKICB9LAogIGNyZWF0ZVVzZXI6IGZ1bmN0aW9uIGNyZWF0ZVVzZXIoX3JlZjQsIHBheWxvYWQpIHsKICAgIHZhciBkaXNwYXRjaCA9IF9yZWY0LmRpc3BhdGNoLAogICAgICAgIHJvb3RTdGF0ZSA9IF9yZWY0LnJvb3RTdGF0ZTsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMDsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIF9jcmVhdGVVc2VyKHBheWxvYWQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2xvZ2luJywgcGF5bG9hZCk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZ2V0VXNlckFsaWFzZXMnLCB1bmRlZmluZWQsIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiAnZWRpdC1ibG9nJywKICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICBuYW1lOiByb290U3RhdGUuYWxpYXMudXNlckFsaWFzZXNbMF0uQmxvZy5pZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnQwID0gX2NvbnRleHQ0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTQsIG51bGwsIFtbMCwgMTBdXSk7CiAgICB9KSkoKTsKICB9LAogIHVwZGF0ZVVzZXI6IGZ1bmN0aW9uIHVwZGF0ZVVzZXIoX3JlZjUsIHBheWxvYWQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNS5jb21taXQ7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDUudDAgPSBjb21taXQ7CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBfdXBkYXRlVXNlci5hcHBseSh2b2lkIDAsIF90b0NvbnN1bWFibGVBcnJheShwYXlsb2FkKSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgX2NvbnRleHQ1LnQxID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgKDAsIF9jb250ZXh0NS50MCkoJ3VwZGF0ZUF1dGgnLCBfY29udGV4dDUudDEpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTUpOwogICAgfSkpKCk7CiAgfSwKICBnZXRDdXJyZW50VXNlcjogZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDA7CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBfZ2V0Q3VycmVudFVzZXIoKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDg7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgX2NvbnRleHQ2LnByZXYgPSA1OwogICAgICAgICAgICAgIF9jb250ZXh0Ni50MCA9IF9jb250ZXh0NlsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTYsIG51bGwsIFtbMCwgNV1dKTsKICAgIH0pKSgpOwogIH0sCiAgc2V0TG9nZ2VkSW46IGZ1bmN0aW9uIHNldExvZ2dlZEluKF9yZWY2LCB2YWx1ZSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY2LmNvbW1pdDsKICAgIGNvbW1pdCgnc2V0TG9nZ2VkSW4nLCB2YWx1ZSk7CiAgfQp9Owp2YXIgbXV0YXRpb25zID0gewogIHVwZGF0ZUF1dGg6IGZ1bmN0aW9uIHVwZGF0ZUF1dGgoc3RhdGUsIHVzZXJEYXRhKSB7CiAgICBzdGF0ZS5pc0F1dGhlbnRpY2F0ZWQgPSBoYXNUb2tlbigpOwogICAgdXNlckRhdGEgPyBzZXRVc2VyRGF0YSh1c2VyRGF0YSkgOiByZW1vdmVVc2VyRGF0YSgpOwogICAgc3RhdGUudXNlckRhdGEgPSBnZXRVc2VyRGF0YSgpOwogICAgc2V0QXBpSGVhZGVyKCk7CiAgfSwKICBsb2dpbjogZnVuY3Rpb24gbG9naW4oc3RhdGUsIHBheWxvYWQpIHsKICAgIGlmIChwYXlsb2FkKSB7CiAgICAgIHNhdmVUb2tlbihwYXlsb2FkLnRva2VuKTsKICAgIH0KICB9LAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgZGVzdHJveVRva2VuKCk7CiAgfSwKICBsb2dvdXRBbGw6IGZ1bmN0aW9uIGxvZ291dEFsbCgpIHsKICAgIC8qQFRPRE8gcmV2aXNlKi8KICAgIGRlc3Ryb3lUb2tlbigpOwogIH0sCiAgc2V0TG9nZ2VkSW46IGZ1bmN0aW9uIHNldExvZ2dlZEluKHN0YXRlLCB2YWx1ZSkgewogICAgc3RhdGUuaXNBdXRoZW50aWNhdGVkID0gdmFsdWU7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHN0YXRlLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMKfTs="},{"version":3,"sources":["F:/Projects/fanexus/src/store/modules/auth.module.js"],"names":["setApiHeader","login","logout","logoutAll","createUser","updateUser","getCurrentUser","hasToken","saveToken","destroyToken","getUserData","setUserData","removeUserData","router","state","userData","isAuthenticated","actions","payload","commit","res","dispatch","root","currentRoute","meta","authentication","push","name","rootState","undefined","params","alias","userAliases","Blog","id","setLoggedIn","value","mutations","updateAuth","token"],"mappings":"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","sourcesContent":["import { setApiHeader } from '~api';\r\nimport {\r\n  login,\r\n  logout,\r\n  logoutAll,\r\n  createUser,\r\n  updateUser,\r\n  getCurrentUser\r\n} from '@/services/auth.service';\r\nimport { hasToken, saveToken, destroyToken } from '@/services/jwt.service';\r\n/*@TODO revise it, possibly get the user data from the getCurrentUser*/\r\nimport {\r\n  getUserData,\r\n  setUserData,\r\n  removeUserData\r\n} from '@/services/storage.service';\r\nimport router from '@/router/index';\r\n\r\nconst state = {\r\n  userData: getUserData(),\r\n  isAuthenticated: false\r\n};\r\n\r\nconst actions = {\r\n  async login({ commit }, payload) {\r\n    try {\r\n      const res = await login(payload);\r\n      commit('login', res);\r\n      commit('updateAuth', res && res.userData);\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  },\r\n\r\n  async logout({ commit, dispatch }) {\r\n    try {\r\n      await logout();\r\n      commit('logout');\r\n      commit('updateAuth');\r\n      commit('setLoggedIn', false);\r\n      dispatch('setActiveAlias', 0, { root: true });\r\n      if (router.currentRoute.meta.authentication) {\r\n        router.push({ name: 'home' });\r\n      }\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  },\r\n\r\n  async logoutAll({ commit }) {\r\n    try {\r\n      await logoutAll();\r\n      commit('logoutAll');\r\n      commit('updateAuth');\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  },\r\n\r\n  async createUser({ dispatch, rootState }, payload) {\r\n    try {\r\n      await createUser(payload);\r\n      await dispatch('login', payload);\r\n      await dispatch('getUserAliases', undefined, { root: true });\r\n      router.push({\r\n        name: 'edit-blog',\r\n        params: { name: rootState.alias.userAliases[0].Blog.id }\r\n      });\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  },\r\n\r\n  async updateUser({ commit }, payload) {\r\n    commit('updateAuth', await updateUser(...payload));\r\n  },\r\n\r\n  async getCurrentUser() {\r\n    try {\r\n      await getCurrentUser();\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  },\r\n\r\n  setLoggedIn({ commit }, value) {\r\n    commit('setLoggedIn', value);\r\n  }\r\n};\r\n\r\nconst mutations = {\r\n  updateAuth(state, userData) {\r\n    state.isAuthenticated = hasToken();\r\n    userData ? setUserData(userData) : removeUserData();\r\n\r\n    state.userData = getUserData();\r\n    setApiHeader();\r\n  },\r\n  login(state, payload) {\r\n    if (payload) {\r\n      saveToken(payload.token);\r\n    }\r\n  },\r\n  logout() {\r\n    destroyToken();\r\n  },\r\n  logoutAll() {\r\n    /*@TODO revise*/\r\n    destroyToken();\r\n  },\r\n  setLoggedIn(state, value) {\r\n    state.isAuthenticated = value;\r\n  }\r\n};\r\n\r\nexport default {\r\n  state,\r\n  actions,\r\n  mutations\r\n};\r\n"]}]}