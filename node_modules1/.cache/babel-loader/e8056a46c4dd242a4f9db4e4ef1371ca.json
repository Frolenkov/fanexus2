{"remainingRequest":"I:\\Projects\\fanexus\\node_modules\\thread-loader\\dist\\cjs.js!I:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js!I:\\Projects\\fanexus\\node_modules\\eslint-loader\\index.js??ref--13-0!I:\\Projects\\fanexus\\src\\services\\api.service.js","dependencies":[{"path":"I:\\Projects\\fanexus\\src\\services\\api.service.js","mtime":1588842831897},{"path":"I:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkk6XFxQcm9qZWN0c1xcZmFuZXh1c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IFZ1ZUF4aW9zIGZyb20gJ3Z1ZS1heGlvcyc7CmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAnQC9zZXJ2aWNlcy9qd3Quc2VydmljZSc7CmltcG9ydCB7IEFQSV9VUkwgfSBmcm9tICdAL3NlcnZpY2VzL2NvbmZpZyc7CmV4cG9ydCB2YXIgYXBpSW5pdCA9IGZ1bmN0aW9uIGFwaUluaXQoKSB7CiAgVnVlLnVzZShWdWVBeGlvcywgYXhpb3MpOwogIFZ1ZS5heGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gQVBJX1VSTDsKICBzZXRBcGlIZWFkZXIoKTsKICBheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0pOwp9OwovKkBUT0RPIHJlbW92ZSB0aGlzIGZ1bmN0aW9uIGFzIHdlbGwgYXMgdGhlIGFsbCBtb2NrcyovCgpleHBvcnQgdmFyIGdldE1vY2tlZCA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZGF0YSkgewogICAgdmFyIHRpbWVPdXQsCiAgICAgICAgX2FyZ3MgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHRpbWVPdXQgPSBfYXJncy5sZW5ndGggPiAxICYmIF9hcmdzWzFdICE9PSB1bmRlZmluZWQgPyBfYXJnc1sxXSA6IDEwMDA7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZGF0YSk7CiAgICAgICAgICAgICAgfSwgdGltZU91dCk7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gZ2V0TW9ja2VkKF94KSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKZXhwb3J0IHZhciBzZXRBcGlIZWFkZXIgPSBmdW5jdGlvbiBzZXRBcGlIZWFkZXIoKSB7CiAgdmFyIHRva2VuID0gZ2V0VG9rZW4oKTsKICBWdWUuYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IHRva2VuID8gIkJlYXJlciAiLmNvbmNhdChnZXRUb2tlbigpKSA6ICcnOwp9OwpleHBvcnQgdmFyIGdldCA9IGZ1bmN0aW9uIGdldChyZXNvdXJjZSkgewogIHJldHVybiBheGlvcy5nZXQocmVzb3VyY2UpOwp9OwpleHBvcnQgdmFyIHBvc3QgPSBmdW5jdGlvbiBwb3N0KHJlc291cmNlLCBwYXlsb2FkKSB7CiAgcmV0dXJuIGF4aW9zLnBvc3QocmVzb3VyY2UsIHBheWxvYWQpOwp9OwpleHBvcnQgdmFyIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZShyZXNvdXJjZSkgewogIHJldHVybiBheGlvcy5kZWxldGUocmVzb3VyY2UpOwp9OwpleHBvcnQgZGVmYXVsdCB7CiAgYXBpSW5pdDogYXBpSW5pdCwKICBzZXRBcGlIZWFkZXI6IHNldEFwaUhlYWRlciwKICBnZXQ6IGdldCwKICBwb3N0OiBwb3N0LAogIHJlbW92ZTogcmVtb3ZlCn07"},{"version":3,"sources":["I:/Projects/fanexus/src/services/api.service.js"],"names":["Vue","axios","VueAxios","getToken","API_URL","apiInit","use","defaults","baseURL","setApiHeader","interceptors","response","data","error","Promise","reject","getMocked","timeOut","resolve","setTimeout","token","headers","common","get","resource","post","payload","remove","delete"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,SAASC,QAAT,QAAyB,wBAAzB;AACA,SAASC,OAAT,QAAwB,mBAAxB;AAEA,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AAC3BL,EAAAA,GAAG,CAACM,GAAJ,CAAQJ,QAAR,EAAkBD,KAAlB;AACAD,EAAAA,GAAG,CAACC,KAAJ,CAAUM,QAAV,CAAmBC,OAAnB,GAA6BJ,OAA7B;AACAK,EAAAA,YAAY;AACZR,EAAAA,KAAK,CAACS,YAAN,CAAmBC,QAAnB,CAA4BL,GAA5B,CACE,UAAAK,QAAQ;AAAA,WAAIA,QAAQ,CAACC,IAAb;AAAA,GADV,EAEE,UAAAC,KAAK;AAAA,WAAIC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAJ;AAAA,GAFP;AAID,CARM;AAUP;;AACA,OAAO,IAAMG,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAG,iBAAOJ,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAaK,YAAAA,OAAb,2DAAuB,IAAvB;AAAA,6CAChB,IAAIH,OAAJ,CAAY,UAAAI,OAAO;AAAA,qBAAIC,UAAU,CAAC;AAAA,uBAAMD,OAAO,CAACN,IAAD,CAAb;AAAA,eAAD,EAAsBK,OAAtB,CAAd;AAAA,aAAnB,CADgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAATD,SAAS;AAAA;AAAA;AAAA,GAAf;AAGP,OAAO,IAAMP,YAAY,GAAG,SAAfA,YAAe,GAAM;AAChC,MAAMW,KAAK,GAAGjB,QAAQ,EAAtB;AACAH,EAAAA,GAAG,CAACC,KAAJ,CAAUM,QAAV,CAAmBc,OAAnB,CAA2BC,MAA3B,CAAkC,eAAlC,IAAqDF,KAAK,oBAC5CjB,QAAQ,EADoC,IAEtD,EAFJ;AAGD,CALM;AAMP,OAAO,IAAMoB,GAAG,GAAG,SAANA,GAAM,CAAAC,QAAQ;AAAA,SAAIvB,KAAK,CAACsB,GAAN,CAAUC,QAAV,CAAJ;AAAA,CAApB;AACP,OAAO,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAACD,QAAD,EAAWE,OAAX;AAAA,SAAuBzB,KAAK,CAACwB,IAAN,CAAWD,QAAX,EAAqBE,OAArB,CAAvB;AAAA,CAAb;AACP,OAAO,IAAMC,MAAM,GAAG,SAATA,MAAS,CAAAH,QAAQ;AAAA,SAAIvB,KAAK,CAAC2B,MAAN,CAAaJ,QAAb,CAAJ;AAAA,CAAvB;AAEP,eAAe;AAAEnB,EAAAA,OAAO,EAAPA,OAAF;AAAWI,EAAAA,YAAY,EAAZA,YAAX;AAAyBc,EAAAA,GAAG,EAAHA,GAAzB;AAA8BE,EAAAA,IAAI,EAAJA,IAA9B;AAAoCE,EAAAA,MAAM,EAANA;AAApC,CAAf","sourcesContent":["import Vue from 'vue';\r\nimport axios from 'axios';\r\nimport VueAxios from 'vue-axios';\r\nimport { getToken } from '@/services/jwt.service';\r\nimport { API_URL } from '@/services/config';\r\n\r\nexport const apiInit = () => {\r\n  Vue.use(VueAxios, axios);\r\n  Vue.axios.defaults.baseURL = API_URL;\r\n  setApiHeader();\r\n  axios.interceptors.response.use(\r\n    response => response.data,\r\n    error => Promise.reject(error)\r\n  );\r\n};\r\n\r\n/*@TODO remove this function as well as the all mocks*/\r\nexport const getMocked = async (data, timeOut = 1000) => {\r\n  return new Promise(resolve => setTimeout(() => resolve(data), timeOut));\r\n};\r\nexport const setApiHeader = () => {\r\n  const token = getToken();\r\n  Vue.axios.defaults.headers.common['Authorization'] = token\r\n    ? `Bearer ${getToken()}`\r\n    : '';\r\n};\r\nexport const get = resource => axios.get(resource);\r\nexport const post = (resource, payload) => axios.post(resource, payload);\r\nexport const remove = resource => axios.delete(resource);\r\n\r\nexport default { apiInit, setApiHeader, get, post, remove };\r\n"]}]}