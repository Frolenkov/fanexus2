{"remainingRequest":"I:\\Projects\\fanexus\\node_modules\\thread-loader\\dist\\cjs.js!I:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js!I:\\Projects\\fanexus\\node_modules\\eslint-loader\\index.js??ref--13-0!I:\\Projects\\fanexus\\src\\services\\rich-text-editor.service.js","dependencies":[{"path":"I:\\Projects\\fanexus\\src\\services\\rich-text-editor.service.js","mtime":1589984392012},{"path":"I:\\Projects\\fanexus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"I:\\Projects\\fanexus\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqIEBUT0RPIHJldmlzZSAqLwpleHBvcnQgdmFyIGFjdGlvbnMgPSB7CiAgZm9ybWF0QmxvY2s6ICdmb3JtYXRCbG9jaycsCiAgdXBsb2FkSW1hZ2U6ICd1cGxvYWRJbWFnZScKfTsKZXhwb3J0IHZhciBjb21tYW5kcyA9IFt7CiAgaWQ6IDEsCiAgdHlwZTogJ2JvbGQnLAogIGljb246ICdib2xkJwp9LCB7CiAgaWQ6IDIsCiAgdHlwZTogJ2l0YWxpYycsCiAgaWNvbjogJ2l0YWxpYycKfSwgewogIGlkOiA0LAogIHR5cGU6ICd1bmRlcmxpbmUnLAogIGljb246ICd1bmRlcmxpbmUnCn0sIHsKICBpZDogNSwKICB0eXBlOiAnc3RyaWtlVGhyb3VnaCcsCiAgaWNvbjogJ3N0cmlrZVRocm91Z2gnCn0sIHsKICBpZDogNiwKICB0eXBlOiAnc3Vic2NyaXB0JywKICBpY29uOiAnc3Vic2NyaXB0Jwp9LCB7CiAgaWQ6IDcsCiAgdHlwZTogJ3N1cGVyc2NyaXB0JywKICBpY29uOiAnc3VwZXJzY3JpcHQnCn0sIC8vIHsgaWQ6IDgsIHR5cGU6ICd1cHBlcmNhc2UnLCBpY29uOiAndXBwZXJjYXNlJyB9LAovLyB7IGlkOiA5LCB0eXBlOiAnbG93ZXJjYXNlJywgaWNvbjogJ2xvd2VyY2FzZScgfSwKCi8qKiBAVE9ETyBhZGQgcmV0dXJuIHRvIG5vcm1hbCB0ZXh0ICovCnsKICBpZDogMTAsCiAgdHlwZTogJ2Zvcm1hdEJsb2NrSDEnLAogIGljb246ICdmb3JtYXRCbG9ja0gxJwp9LCB7CiAgaWQ6IDExLAogIHR5cGU6ICdmb3JtYXRCbG9ja0gyJywKICBpY29uOiAnZm9ybWF0QmxvY2tIMicKfSwgewogIGlkOiAxMiwKICB0eXBlOiAnaW5zZXJ0VW5vcmRlcmVkTGlzdCcsCiAgaWNvbjogJ2luc2VydFVub3JkZXJlZExpc3QnCn0sIHsKICBpZDogMTMsCiAgdHlwZTogJ2luc2VydE9yZGVyZWRMaXN0JywKICBpY29uOiAnaW5zZXJ0T3JkZXJlZExpc3QnCn1dOwpleHBvcnQgdmFyIG1lZGlhQWN0aW9ucyA9IFsKLyoqIEBUT0RPIHJldmlzZSAqLwp7CiAgaWQ6IDEsCiAgdHlwZTogJ2NyZWF0ZUxpbmsnLAogIGljb246ICdsaW5rLWljb24nCn0sIC8vIHsgaWQ6IDIsIHR5cGU6ICdhdWRpbycsIGljb246ICdhdWRpby1pY29uJyB9LAp7CiAgaWQ6IDMsCiAgdHlwZTogJ3VwbG9hZEltYWdlJywKICBpY29uOiAnaW1hZ2UtaWNvbicKfSAvLyB7IGlkOiA0LCB0eXBlOiAndmlkZW8nLCBpY29uOiAndmlkZW8taWNvbicgfQpdOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYWxlcnQKCnZhciBjcmVhdGVMaW5rID0gZnVuY3Rpb24gY3JlYXRlTGluaygpIHsKICByZXR1cm4gcHJvbXB0KCdFbnRlciB0aGUgVVJMJyk7Cn07Ci8qKiBAVE9ETyBhZGQgZnVuY3Rpb25hbGl0eSAqLwoKCnZhciB1cGxvYWRJbWFnZSA9IGZ1bmN0aW9uIHVwbG9hZEltYWdlKGVkaXRvckNvbnRlbnQsIGZpbGUpIHsKICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICB2YXIgZGF0YVVSSTsKICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHsKICAgIGRhdGFVUkkgPSByZWFkZXIucmVzdWx0OwogICAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwogICAgaW1nLnNyYyA9IGRhdGFVUkk7CiAgICBlZGl0b3JDb250ZW50LmFwcGVuZENoaWxkKGltZyk7CiAgfSwgZmFsc2UpOwoKICBpZiAoZmlsZSkgewogICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgfQp9OwoKdmFyIGdldEZvcm1hdEJsb2NrQXJndW1lbnQgPSBmdW5jdGlvbiBnZXRGb3JtYXRCbG9ja0FyZ3VtZW50KGNvbW1hbmROYW1lKSB7CiAgcmV0dXJuIGNvbW1hbmROYW1lLnN1YnN0cmluZyhhY3Rpb25zLmZvcm1hdEJsb2NrLmxlbmd0aCk7Cn07CgpleHBvcnQgdmFyIGdldFF1ZXJ5Q29tbWFuZFN0YXRlID0gZnVuY3Rpb24gZ2V0UXVlcnlDb21tYW5kU3RhdGUoYUNvbW1hbmROYW1lKSB7CiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlKGFDb21tYW5kTmFtZSk7Cn07CmV4cG9ydCB2YXIgZXhlY0NvbW1hbmQgPSBmdW5jdGlvbiBleGVjQ29tbWFuZChhQ29tbWFuZE5hbWUpIHsKICB2YXIgYVNob3dEZWZhdWx0VUkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogIHZhciBhVmFsdWVBcmd1bWVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJyc7CiAgdmFyIGVkaXRvckNvbnRlbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDsKICB2YXIgZmlsZSA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ID8gYXJndW1lbnRzWzRdIDogdW5kZWZpbmVkOwoKICAvKiogQFRPRE8gY3JlYXRlIGFjdGlvbiB0eXBlcyAqLwogIHN3aXRjaCAoYUNvbW1hbmROYW1lKSB7CiAgICBjYXNlICdjcmVhdGVMaW5rJzoKICAgICAgYVZhbHVlQXJndW1lbnQgPSBjcmVhdGVMaW5rKCk7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgYWN0aW9ucy51cGxvYWRJbWFnZToKICAgICAgdXBsb2FkSW1hZ2UoZWRpdG9yQ29udGVudCwgZmlsZSk7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgJ2Zvcm1hdEJsb2NrSDEnOgogICAgY2FzZSAnZm9ybWF0QmxvY2tIMic6CiAgICAgIGFWYWx1ZUFyZ3VtZW50ID0gZ2V0Rm9ybWF0QmxvY2tBcmd1bWVudChhQ29tbWFuZE5hbWUpOwogICAgICBhQ29tbWFuZE5hbWUgPSBhY3Rpb25zLmZvcm1hdEJsb2NrOwogIH0KCiAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoYUNvbW1hbmROYW1lLCBhU2hvd0RlZmF1bHRVSSwgYVZhbHVlQXJndW1lbnQpOwp9Ow=="},{"version":3,"sources":["I:/Projects/fanexus/src/services/rich-text-editor.service.js"],"names":["actions","formatBlock","uploadImage","commands","id","type","icon","mediaActions","createLink","prompt","editorContent","file","reader","FileReader","dataURI","addEventListener","result","img","document","createElement","src","appendChild","readAsDataURL","getFormatBlockArgument","commandName","substring","length","getQueryCommandState","aCommandName","queryCommandState","execCommand","aShowDefaultUI","aValueArgument"],"mappings":"AAAA;AACA,OAAO,IAAMA,OAAO,GAAG;AACrBC,EAAAA,WAAW,EAAE,aADQ;AAErBC,EAAAA,WAAW,EAAE;AAFQ,CAAhB;AAKP,OAAO,IAAMC,QAAQ,GAAG,CACtB;AAAEC,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,MAAf;AAAuBC,EAAAA,IAAI,EAAE;AAA7B,CADsB,EAEtB;AAAEF,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,QAAf;AAAyBC,EAAAA,IAAI,EAAE;AAA/B,CAFsB,EAGtB;AAAEF,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,WAAf;AAA4BC,EAAAA,IAAI,EAAE;AAAlC,CAHsB,EAItB;AAAEF,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,eAAf;AAAgCC,EAAAA,IAAI,EAAE;AAAtC,CAJsB,EAKtB;AAAEF,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,WAAf;AAA4BC,EAAAA,IAAI,EAAE;AAAlC,CALsB,EAMtB;AAAEF,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,aAAf;AAA8BC,EAAAA,IAAI,EAAE;AAApC,CANsB,EAOtB;AACA;;AACA;AACA;AAAEF,EAAAA,EAAE,EAAE,EAAN;AAAUC,EAAAA,IAAI,EAAE,eAAhB;AAAiCC,EAAAA,IAAI,EAAE;AAAvC,CAVsB,EAWtB;AAAEF,EAAAA,EAAE,EAAE,EAAN;AAAUC,EAAAA,IAAI,EAAE,eAAhB;AAAiCC,EAAAA,IAAI,EAAE;AAAvC,CAXsB,EAYtB;AAAEF,EAAAA,EAAE,EAAE,EAAN;AAAUC,EAAAA,IAAI,EAAE,qBAAhB;AAAuCC,EAAAA,IAAI,EAAE;AAA7C,CAZsB,EAatB;AAAEF,EAAAA,EAAE,EAAE,EAAN;AAAUC,EAAAA,IAAI,EAAE,mBAAhB;AAAqCC,EAAAA,IAAI,EAAE;AAA3C,CAbsB,CAAjB;AAeP,OAAO,IAAMC,YAAY,GAAG;AAC1B;AACA;AAAEH,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,YAAf;AAA6BC,EAAAA,IAAI,EAAE;AAAnC,CAF0B,EAG1B;AACA;AAAEF,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,IAAI,EAAE,aAAf;AAA8BC,EAAAA,IAAI,EAAE;AAApC,CAJ0B,CAK1B;AAL0B,CAArB,C,CAQP;;AACA,IAAME,UAAU,GAAG,SAAbA,UAAa;AAAA,SAAMC,MAAM,CAAC,eAAD,CAAZ;AAAA,CAAnB;AACA;;;AACA,IAAMP,WAAW,GAAG,SAAdA,WAAc,CAACQ,aAAD,EAAgBC,IAAhB,EAAyB;AAC3C,MAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;AAEA,MAAIC,OAAJ;AAEAF,EAAAA,MAAM,CAACG,gBAAP,CACE,MADF,EAEE,YAAW;AACTD,IAAAA,OAAO,GAAGF,MAAM,CAACI,MAAjB;AAEA,QAAMC,GAAG,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAZ;AACAF,IAAAA,GAAG,CAACG,GAAJ,GAAUN,OAAV;AACAJ,IAAAA,aAAa,CAACW,WAAd,CAA0BJ,GAA1B;AACD,GARH,EASE,KATF;;AAYA,MAAIN,IAAJ,EAAU;AACRC,IAAAA,MAAM,CAACU,aAAP,CAAqBX,IAArB;AACD;AACF,CApBD;;AAqBA,IAAMY,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAAC,WAAW;AAAA,SACxCA,WAAW,CAACC,SAAZ,CAAsBzB,OAAO,CAACC,WAAR,CAAoByB,MAA1C,CADwC;AAAA,CAA1C;;AAGA,OAAO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAAC,YAAY;AAAA,SAC9CV,QAAQ,CAACW,iBAAT,CAA2BD,YAA3B,CAD8C;AAAA,CAAzC;AAGP,OAAO,IAAME,WAAW,GAAG,SAAdA,WAAc,CACzBF,YADyB,EAMtB;AAAA,MAJHG,cAIG,uEAJc,KAId;AAAA,MAHHC,cAGG,uEAHc,EAGd;AAAA,MAFHtB,aAEG;AAAA,MADHC,IACG;;AACH;AACA,UAAQiB,YAAR;AACE,SAAK,YAAL;AACEI,MAAAA,cAAc,GAAGxB,UAAU,EAA3B;AACA;;AACF,SAAKR,OAAO,CAACE,WAAb;AACEA,MAAAA,WAAW,CAACQ,aAAD,EAAgBC,IAAhB,CAAX;AACA;;AACF,SAAK,eAAL;AACA,SAAK,eAAL;AACEqB,MAAAA,cAAc,GAAGT,sBAAsB,CAACK,YAAD,CAAvC;AACAA,MAAAA,YAAY,GAAG5B,OAAO,CAACC,WAAvB;AAVJ;;AAaAiB,EAAAA,QAAQ,CAACY,WAAT,CAAqBF,YAArB,EAAmCG,cAAnC,EAAmDC,cAAnD;AACD,CAtBM","sourcesContent":["/** @TODO revise */\r\nexport const actions = {\r\n  formatBlock: 'formatBlock',\r\n  uploadImage: 'uploadImage'\r\n};\r\n\r\nexport const commands = [\r\n  { id: 1, type: 'bold', icon: 'bold' },\r\n  { id: 2, type: 'italic', icon: 'italic' },\r\n  { id: 4, type: 'underline', icon: 'underline' },\r\n  { id: 5, type: 'strikeThrough', icon: 'strikeThrough' },\r\n  { id: 6, type: 'subscript', icon: 'subscript' },\r\n  { id: 7, type: 'superscript', icon: 'superscript' },\r\n  // { id: 8, type: 'uppercase', icon: 'uppercase' },\r\n  // { id: 9, type: 'lowercase', icon: 'lowercase' },\r\n  /** @TODO add return to normal text */\r\n  { id: 10, type: 'formatBlockH1', icon: 'formatBlockH1' },\r\n  { id: 11, type: 'formatBlockH2', icon: 'formatBlockH2' },\r\n  { id: 12, type: 'insertUnorderedList', icon: 'insertUnorderedList' },\r\n  { id: 13, type: 'insertOrderedList', icon: 'insertOrderedList' }\r\n];\r\nexport const mediaActions = [\r\n  /** @TODO revise */\r\n  { id: 1, type: 'createLink', icon: 'link-icon' },\r\n  // { id: 2, type: 'audio', icon: 'audio-icon' },\r\n  { id: 3, type: 'uploadImage', icon: 'image-icon' }\r\n  // { id: 4, type: 'video', icon: 'video-icon' }\r\n];\r\n\r\n// eslint-disable-next-line no-alert\r\nconst createLink = () => prompt('Enter the URL');\r\n/** @TODO add functionality */\r\nconst uploadImage = (editorContent, file) => {\r\n  const reader = new FileReader();\r\n\r\n  let dataURI;\r\n\r\n  reader.addEventListener(\r\n    'load',\r\n    function() {\r\n      dataURI = reader.result;\r\n\r\n      const img = document.createElement('img');\r\n      img.src = dataURI;\r\n      editorContent.appendChild(img);\r\n    },\r\n    false\r\n  );\r\n\r\n  if (file) {\r\n    reader.readAsDataURL(file);\r\n  }\r\n};\r\nconst getFormatBlockArgument = commandName =>\r\n  commandName.substring(actions.formatBlock.length);\r\n\r\nexport const getQueryCommandState = aCommandName =>\r\n  document.queryCommandState(aCommandName);\r\n\r\nexport const execCommand = (\r\n  aCommandName,\r\n  aShowDefaultUI = false,\r\n  aValueArgument = '',\r\n  editorContent,\r\n  file\r\n) => {\r\n  /** @TODO create action types */\r\n  switch (aCommandName) {\r\n    case 'createLink':\r\n      aValueArgument = createLink();\r\n      break;\r\n    case actions.uploadImage:\r\n      uploadImage(editorContent, file);\r\n      break;\r\n    case 'formatBlockH1':\r\n    case 'formatBlockH2':\r\n      aValueArgument = getFormatBlockArgument(aCommandName);\r\n      aCommandName = actions.formatBlock;\r\n  }\r\n\r\n  document.execCommand(aCommandName, aShowDefaultUI, aValueArgument);\r\n};\r\n"]}]}